alter system set _enable_add_fulltext_index_to_existing_table = true;
drop database if exists fts_basic_dml;
create database fts_basic_dml;
use fts_basic_dml;
DROP TABLE IF EXISTS fts_basic_dml_articles;
result_format: 3
######## Create Table With Auto Increment Column #########
======================== create ==========================
CREATE TABLE fts_basic_dml_articles (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    content TEXT,
    FULLTEXT INDEX ctx(title, content)
);
set _show_ddl_in_compat_mode = 1;
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(200) DEFAULT NULL,
  `content` text DEFAULT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `ctx` (`title`, `content`)
) AUTO_INCREMENT = 1 DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC
set _show_ddl_in_compat_mode = 0;
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(200) DEFAULT NULL,
  `content` text DEFAULT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `ctx` (`title`, `content`) WITH PARSER space PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384
) ORGANIZATION INDEX AUTO_INCREMENT = 1 AUTO_INCREMENT_MODE = 'ORDER' DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = replica_num BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE ENABLE_MACRO_BLOCK_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0
SHOW INDEX FROM fts_basic_dml_articles;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment	Visible	Expression
fts_basic_dml_articles	0	PRIMARY	1	id	A	NULL	NULL	NULL		BTREE	available		YES	NULL
fts_basic_dml_articles	1	ctx	1	title	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx	2	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
======================== insert ==========================
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('OceanBase Tutorial', 'This is a tutorial about Oceanbase Fulltext.'),
('Fulltext Index', 'Fulltext index can be very useful.'),
('OceanBase Test Case', 'Writing test cases helps ensure quality.');
select * from fts_basic_dml_articles order by id;
+----+---------------------+----------------------------------------------+
| id | title               | content                                      |
+----+---------------------+----------------------------------------------+
|  1 | OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
|  2 | Fulltext Index      | Fulltext index can be very useful.           |
|  3 | OceanBase Test Case | Writing test cases helps ensure quality.     |
+----+---------------------+----------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  1 | 0100000000000000 |
|  2 | 0200000000000000 |
|  3 | 0300000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0100000000000000 |  1 |
| 0200000000000000 |  2 |
| 0300000000000000 |  3 |
+------------------+----+
+-----------+------------------+------------+------------+
| word      | doc_id           | word_count | doc_length |
+-----------+------------------+------------+------------+
| can       | 0200000000000000 |          1 |          7 |
| case      | 0300000000000000 |          1 |          9 |
| cases     | 0300000000000000 |          1 |          9 |
| ensure    | 0300000000000000 |          1 |          9 |
| fulltext  | 0100000000000000 |          1 |          5 |
| fulltext  | 0200000000000000 |          2 |          7 |
| helps     | 0300000000000000 |          1 |          9 |
| index     | 0200000000000000 |          2 |          7 |
| oceanbase | 0100000000000000 |          2 |          5 |
| oceanbase | 0300000000000000 |          1 |          9 |
| quality   | 0300000000000000 |          1 |          9 |
| test      | 0300000000000000 |          2 |          9 |
| tutorial  | 0100000000000000 |          2 |          5 |
| useful    | 0200000000000000 |          1 |          7 |
| very      | 0200000000000000 |          1 |          7 |
| writing   | 0300000000000000 |          1 |          9 |
+-----------+------------------+------------+------------+
+------------------+-----------+------------+------------+
| doc_id           | word      | word_count | doc_length |
+------------------+-----------+------------+------------+
| 0100000000000000 | fulltext  |          1 |          5 |
| 0100000000000000 | oceanbase |          2 |          5 |
| 0100000000000000 | tutorial  |          2 |          5 |
| 0200000000000000 | can       |          1 |          7 |
| 0200000000000000 | fulltext  |          2 |          7 |
| 0200000000000000 | index     |          2 |          7 |
| 0200000000000000 | useful    |          1 |          7 |
| 0200000000000000 | very      |          1 |          7 |
| 0300000000000000 | case      |          1 |          9 |
| 0300000000000000 | cases     |          1 |          9 |
| 0300000000000000 | ensure    |          1 |          9 |
| 0300000000000000 | helps     |          1 |          9 |
| 0300000000000000 | oceanbase |          1 |          9 |
| 0300000000000000 | quality   |          1 |          9 |
| 0300000000000000 | test      |          2 |          9 |
| 0300000000000000 | writing   |          1 |          9 |
+------------------+-----------+------------+------------+
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('Optimizing OceanBase', 'This is a query optimization guide for OceanBase Database.'),
('How to use Database', 'This is a using tutorial about Databases.');
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  1 | OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
|  2 | Fulltext Index       | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  1 | 0100000000000000 |
|  2 | 0200000000000000 |
|  3 | 0300000000000000 |
|  4 | 0400000000000000 |
|  5 | 0500000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0100000000000000 |  1 |
| 0200000000000000 |  2 |
| 0300000000000000 |  3 |
| 0400000000000000 |  4 |
| 0500000000000000 |  5 |
+------------------+----+
+--------------+------------------+------------+------------+
| word         | doc_id           | word_count | doc_length |
+--------------+------------------+------------+------------+
| can          | 0200000000000000 |          1 |          7 |
| case         | 0300000000000000 |          1 |          9 |
| cases        | 0300000000000000 |          1 |          9 |
| database     | 0400000000000000 |          1 |          7 |
| database     | 0500000000000000 |          1 |          5 |
| databases    | 0500000000000000 |          1 |          5 |
| ensure       | 0300000000000000 |          1 |          9 |
| fulltext     | 0100000000000000 |          1 |          5 |
| fulltext     | 0200000000000000 |          2 |          7 |
| guide        | 0400000000000000 |          1 |          7 |
| helps        | 0300000000000000 |          1 |          9 |
| index        | 0200000000000000 |          2 |          7 |
| oceanbase    | 0100000000000000 |          2 |          5 |
| oceanbase    | 0300000000000000 |          1 |          9 |
| oceanbase    | 0400000000000000 |          2 |          7 |
| optimization | 0400000000000000 |          1 |          7 |
| optimizing   | 0400000000000000 |          1 |          7 |
| quality      | 0300000000000000 |          1 |          9 |
| query        | 0400000000000000 |          1 |          7 |
| test         | 0300000000000000 |          2 |          9 |
| tutorial     | 0100000000000000 |          2 |          5 |
| tutorial     | 0500000000000000 |          1 |          5 |
| use          | 0500000000000000 |          1 |          5 |
| useful       | 0200000000000000 |          1 |          7 |
| using        | 0500000000000000 |          1 |          5 |
| very         | 0200000000000000 |          1 |          7 |
| writing      | 0300000000000000 |          1 |          9 |
+--------------+------------------+------------+------------+
+------------------+--------------+------------+------------+
| doc_id           | word         | word_count | doc_length |
+------------------+--------------+------------+------------+
| 0100000000000000 | fulltext     |          1 |          5 |
| 0100000000000000 | oceanbase    |          2 |          5 |
| 0100000000000000 | tutorial     |          2 |          5 |
| 0200000000000000 | can          |          1 |          7 |
| 0200000000000000 | fulltext     |          2 |          7 |
| 0200000000000000 | index        |          2 |          7 |
| 0200000000000000 | useful       |          1 |          7 |
| 0200000000000000 | very         |          1 |          7 |
| 0300000000000000 | case         |          1 |          9 |
| 0300000000000000 | cases        |          1 |          9 |
| 0300000000000000 | ensure       |          1 |          9 |
| 0300000000000000 | helps        |          1 |          9 |
| 0300000000000000 | oceanbase    |          1 |          9 |
| 0300000000000000 | quality      |          1 |          9 |
| 0300000000000000 | test         |          2 |          9 |
| 0300000000000000 | writing      |          1 |          9 |
| 0400000000000000 | database     |          1 |          7 |
| 0400000000000000 | guide        |          1 |          7 |
| 0400000000000000 | oceanbase    |          2 |          7 |
| 0400000000000000 | optimization |          1 |          7 |
| 0400000000000000 | optimizing   |          1 |          7 |
| 0400000000000000 | query        |          1 |          7 |
| 0500000000000000 | database     |          1 |          5 |
| 0500000000000000 | databases    |          1 |          5 |
| 0500000000000000 | tutorial     |          1 |          5 |
| 0500000000000000 | use          |          1 |          5 |
| 0500000000000000 | using        |          1 |          5 |
+------------------+--------------+------------+------------+
========================= update ==========================
UPDATE fts_basic_dml_articles SET title = 'Fulltext Indexing' WHERE id = 2;
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  1 | OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
|  2 | Fulltext Indexing    | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  1 | 0100000000000000 |
|  2 | 0200000000000000 |
|  3 | 0300000000000000 |
|  4 | 0400000000000000 |
|  5 | 0500000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0100000000000000 |  1 |
| 0200000000000000 |  2 |
| 0300000000000000 |  3 |
| 0400000000000000 |  4 |
| 0500000000000000 |  5 |
+------------------+----+
+--------------+------------------+------------+------------+
| word         | doc_id           | word_count | doc_length |
+--------------+------------------+------------+------------+
| can          | 0200000000000000 |          1 |          7 |
| case         | 0300000000000000 |          1 |          9 |
| cases        | 0300000000000000 |          1 |          9 |
| database     | 0400000000000000 |          1 |          7 |
| database     | 0500000000000000 |          1 |          5 |
| databases    | 0500000000000000 |          1 |          5 |
| ensure       | 0300000000000000 |          1 |          9 |
| fulltext     | 0100000000000000 |          1 |          5 |
| fulltext     | 0200000000000000 |          2 |          7 |
| guide        | 0400000000000000 |          1 |          7 |
| helps        | 0300000000000000 |          1 |          9 |
| index        | 0200000000000000 |          1 |          7 |
| indexing     | 0200000000000000 |          1 |          7 |
| oceanbase    | 0100000000000000 |          2 |          5 |
| oceanbase    | 0300000000000000 |          1 |          9 |
| oceanbase    | 0400000000000000 |          2 |          7 |
| optimization | 0400000000000000 |          1 |          7 |
| optimizing   | 0400000000000000 |          1 |          7 |
| quality      | 0300000000000000 |          1 |          9 |
| query        | 0400000000000000 |          1 |          7 |
| test         | 0300000000000000 |          2 |          9 |
| tutorial     | 0100000000000000 |          2 |          5 |
| tutorial     | 0500000000000000 |          1 |          5 |
| use          | 0500000000000000 |          1 |          5 |
| useful       | 0200000000000000 |          1 |          7 |
| using        | 0500000000000000 |          1 |          5 |
| very         | 0200000000000000 |          1 |          7 |
| writing      | 0300000000000000 |          1 |          9 |
+--------------+------------------+------------+------------+
+------------------+--------------+------------+------------+
| doc_id           | word         | word_count | doc_length |
+------------------+--------------+------------+------------+
| 0100000000000000 | fulltext     |          1 |          5 |
| 0100000000000000 | oceanbase    |          2 |          5 |
| 0100000000000000 | tutorial     |          2 |          5 |
| 0200000000000000 | can          |          1 |          7 |
| 0200000000000000 | fulltext     |          2 |          7 |
| 0200000000000000 | index        |          1 |          7 |
| 0200000000000000 | indexing     |          1 |          7 |
| 0200000000000000 | useful       |          1 |          7 |
| 0200000000000000 | very         |          1 |          7 |
| 0300000000000000 | case         |          1 |          9 |
| 0300000000000000 | cases        |          1 |          9 |
| 0300000000000000 | ensure       |          1 |          9 |
| 0300000000000000 | helps        |          1 |          9 |
| 0300000000000000 | oceanbase    |          1 |          9 |
| 0300000000000000 | quality      |          1 |          9 |
| 0300000000000000 | test         |          2 |          9 |
| 0300000000000000 | writing      |          1 |          9 |
| 0400000000000000 | database     |          1 |          7 |
| 0400000000000000 | guide        |          1 |          7 |
| 0400000000000000 | oceanbase    |          2 |          7 |
| 0400000000000000 | optimization |          1 |          7 |
| 0400000000000000 | optimizing   |          1 |          7 |
| 0400000000000000 | query        |          1 |          7 |
| 0500000000000000 | database     |          1 |          5 |
| 0500000000000000 | databases    |          1 |          5 |
| 0500000000000000 | tutorial     |          1 |          5 |
| 0500000000000000 | use          |          1 |          5 |
| 0500000000000000 | using        |          1 |          5 |
+------------------+--------------+------------+------------+
========================= delete ==========================
DELETE FROM fts_basic_dml_articles WHERE id = 1;
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  2 | Fulltext Indexing    | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  2 | 0200000000000000 |
|  3 | 0300000000000000 |
|  4 | 0400000000000000 |
|  5 | 0500000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0200000000000000 |  2 |
| 0300000000000000 |  3 |
| 0400000000000000 |  4 |
| 0500000000000000 |  5 |
+------------------+----+
+--------------+------------------+------------+------------+
| word         | doc_id           | word_count | doc_length |
+--------------+------------------+------------+------------+
| can          | 0200000000000000 |          1 |          7 |
| case         | 0300000000000000 |          1 |          9 |
| cases        | 0300000000000000 |          1 |          9 |
| database     | 0400000000000000 |          1 |          7 |
| database     | 0500000000000000 |          1 |          5 |
| databases    | 0500000000000000 |          1 |          5 |
| ensure       | 0300000000000000 |          1 |          9 |
| fulltext     | 0200000000000000 |          2 |          7 |
| guide        | 0400000000000000 |          1 |          7 |
| helps        | 0300000000000000 |          1 |          9 |
| index        | 0200000000000000 |          1 |          7 |
| indexing     | 0200000000000000 |          1 |          7 |
| oceanbase    | 0300000000000000 |          1 |          9 |
| oceanbase    | 0400000000000000 |          2 |          7 |
| optimization | 0400000000000000 |          1 |          7 |
| optimizing   | 0400000000000000 |          1 |          7 |
| quality      | 0300000000000000 |          1 |          9 |
| query        | 0400000000000000 |          1 |          7 |
| test         | 0300000000000000 |          2 |          9 |
| tutorial     | 0500000000000000 |          1 |          5 |
| use          | 0500000000000000 |          1 |          5 |
| useful       | 0200000000000000 |          1 |          7 |
| using        | 0500000000000000 |          1 |          5 |
| very         | 0200000000000000 |          1 |          7 |
| writing      | 0300000000000000 |          1 |          9 |
+--------------+------------------+------------+------------+
+------------------+--------------+------------+------------+
| doc_id           | word         | word_count | doc_length |
+------------------+--------------+------------+------------+
| 0200000000000000 | can          |          1 |          7 |
| 0200000000000000 | fulltext     |          2 |          7 |
| 0200000000000000 | index        |          1 |          7 |
| 0200000000000000 | indexing     |          1 |          7 |
| 0200000000000000 | useful       |          1 |          7 |
| 0200000000000000 | very         |          1 |          7 |
| 0300000000000000 | case         |          1 |          9 |
| 0300000000000000 | cases        |          1 |          9 |
| 0300000000000000 | ensure       |          1 |          9 |
| 0300000000000000 | helps        |          1 |          9 |
| 0300000000000000 | oceanbase    |          1 |          9 |
| 0300000000000000 | quality      |          1 |          9 |
| 0300000000000000 | test         |          2 |          9 |
| 0300000000000000 | writing      |          1 |          9 |
| 0400000000000000 | database     |          1 |          7 |
| 0400000000000000 | guide        |          1 |          7 |
| 0400000000000000 | oceanbase    |          2 |          7 |
| 0400000000000000 | optimization |          1 |          7 |
| 0400000000000000 | optimizing   |          1 |          7 |
| 0400000000000000 | query        |          1 |          7 |
| 0500000000000000 | database     |          1 |          5 |
| 0500000000000000 | databases    |          1 |          5 |
| 0500000000000000 | tutorial     |          1 |          5 |
| 0500000000000000 | use          |          1 |          5 |
| 0500000000000000 | using        |          1 |          5 |
+------------------+--------------+------------+------------+
========================= select doc_id ==========================
+------------------+
| doc_id           |
+------------------+
| 0200000000000000 |
| 0300000000000000 |
| 0400000000000000 |
| 0500000000000000 |
+------------------+
========================== drop ===========================
DROP TABLE fts_basic_dml_articles;
########### Create Table With No Primary Key #############
======================== create ==========================
CREATE TABLE fts_basic_dml_articles (
    title VARCHAR(200),
    content TEXT,
    FULLTEXT INDEX ctx(title, content) WITH PARSER space
);
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `title` varchar(200) DEFAULT NULL,
  `content` text DEFAULT NULL,
  FULLTEXT KEY `ctx` (`title`, `content`) WITH PARSER space PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384
) ORGANIZATION INDEX DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = replica_num BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE ENABLE_MACRO_BLOCK_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0
SHOW INDEX FROM fts_basic_dml_articles;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment	Visible	Expression
fts_basic_dml_articles	1	ctx	1	title	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx	2	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
======================== insert ==========================
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('OceanBase Tutorial', 'This is a tutorial about Oceanbase Fulltext.'),
('Fulltext Index', 'Fulltext index can be very useful.'),
('OceanBase Test Case', 'Writing test cases helps ensure quality.');
select * from fts_basic_dml_articles order by title;
+---------------------+----------------------------------------------+
| title               | content                                      |
+---------------------+----------------------------------------------+
| Fulltext Index      | Fulltext index can be very useful.           |
| OceanBase Test Case | Writing test cases helps ensure quality.     |
| OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
+---------------------+----------------------------------------------+
+-----------+--------+------------+------------+
| word      | doc_id | word_count | doc_length |
+-----------+--------+------------+------------+
| can       |      2 |          1 |          7 |
| case      |      3 |          1 |          9 |
| cases     |      3 |          1 |          9 |
| ensure    |      3 |          1 |          9 |
| fulltext  |      1 |          1 |          5 |
| fulltext  |      2 |          2 |          7 |
| helps     |      3 |          1 |          9 |
| index     |      2 |          2 |          7 |
| oceanbase |      1 |          2 |          5 |
| oceanbase |      3 |          1 |          9 |
| quality   |      3 |          1 |          9 |
| test      |      3 |          2 |          9 |
| tutorial  |      1 |          2 |          5 |
| useful    |      2 |          1 |          7 |
| very      |      2 |          1 |          7 |
| writing   |      3 |          1 |          9 |
+-----------+--------+------------+------------+
+--------+-----------+------------+------------+
| doc_id | word      | word_count | doc_lenght |
+--------+-----------+------------+------------+
|      1 | fulltext  |          1 |          5 |
|      1 | oceanbase |          2 |          5 |
|      1 | tutorial  |          2 |          5 |
|      2 | can       |          1 |          7 |
|      2 | fulltext  |          2 |          7 |
|      2 | index     |          2 |          7 |
|      2 | useful    |          1 |          7 |
|      2 | very      |          1 |          7 |
|      3 | case      |          1 |          9 |
|      3 | cases     |          1 |          9 |
|      3 | ensure    |          1 |          9 |
|      3 | helps     |          1 |          9 |
|      3 | oceanbase |          1 |          9 |
|      3 | quality   |          1 |          9 |
|      3 | test      |          2 |          9 |
|      3 | writing   |          1 |          9 |
+--------+-----------+------------+------------+
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('Optimizing OceanBase', 'This is a query optimization guide for OceanBase Database.'),
('How to use Database', 'This is a using tutorial about Databases.');
select * from fts_basic_dml_articles order by title;
+----------------------+------------------------------------------------------------+
| title                | content                                                    |
+----------------------+------------------------------------------------------------+
| Fulltext Index       | Fulltext index can be very useful.                         |
| How to use Database  | This is a using tutorial about Databases.                  |
| OceanBase Test Case  | Writing test cases helps ensure quality.                   |
| OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
| Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
+----------------------+------------------------------------------------------------+
+--------------+--------+------------+------------+
| word         | doc_id | word_count | doc_length |
+--------------+--------+------------+------------+
| can          |      2 |          1 |          7 |
| case         |      3 |          1 |          9 |
| cases        |      3 |          1 |          9 |
| database     |      4 |          1 |          7 |
| database     |      5 |          1 |          5 |
| databases    |      5 |          1 |          5 |
| ensure       |      3 |          1 |          9 |
| fulltext     |      1 |          1 |          5 |
| fulltext     |      2 |          2 |          7 |
| guide        |      4 |          1 |          7 |
| helps        |      3 |          1 |          9 |
| index        |      2 |          2 |          7 |
| oceanbase    |      1 |          2 |          5 |
| oceanbase    |      3 |          1 |          9 |
| oceanbase    |      4 |          2 |          7 |
| optimization |      4 |          1 |          7 |
| optimizing   |      4 |          1 |          7 |
| quality      |      3 |          1 |          9 |
| query        |      4 |          1 |          7 |
| test         |      3 |          2 |          9 |
| tutorial     |      1 |          2 |          5 |
| tutorial     |      5 |          1 |          5 |
| use          |      5 |          1 |          5 |
| useful       |      2 |          1 |          7 |
| using        |      5 |          1 |          5 |
| very         |      2 |          1 |          7 |
| writing      |      3 |          1 |          9 |
+--------------+--------+------------+------------+
+--------+--------------+------------+------------+
| doc_id | word         | word_count | doc_lenght |
+--------+--------------+------------+------------+
|      1 | fulltext     |          1 |          5 |
|      1 | oceanbase    |          2 |          5 |
|      1 | tutorial     |          2 |          5 |
|      2 | can          |          1 |          7 |
|      2 | fulltext     |          2 |          7 |
|      2 | index        |          2 |          7 |
|      2 | useful       |          1 |          7 |
|      2 | very         |          1 |          7 |
|      3 | case         |          1 |          9 |
|      3 | cases        |          1 |          9 |
|      3 | ensure       |          1 |          9 |
|      3 | helps        |          1 |          9 |
|      3 | oceanbase    |          1 |          9 |
|      3 | quality      |          1 |          9 |
|      3 | test         |          2 |          9 |
|      3 | writing      |          1 |          9 |
|      4 | database     |          1 |          7 |
|      4 | guide        |          1 |          7 |
|      4 | oceanbase    |          2 |          7 |
|      4 | optimization |          1 |          7 |
|      4 | optimizing   |          1 |          7 |
|      4 | query        |          1 |          7 |
|      5 | database     |          1 |          5 |
|      5 | databases    |          1 |          5 |
|      5 | tutorial     |          1 |          5 |
|      5 | use          |          1 |          5 |
|      5 | using        |          1 |          5 |
+--------+--------------+------------+------------+
========================= update ==========================
UPDATE fts_basic_dml_articles SET title = 'Fulltext Indexing' WHERE title = 'Fulltext Index';
select * from fts_basic_dml_articles order by title;
+----------------------+------------------------------------------------------------+
| title                | content                                                    |
+----------------------+------------------------------------------------------------+
| Fulltext Indexing    | Fulltext index can be very useful.                         |
| How to use Database  | This is a using tutorial about Databases.                  |
| OceanBase Test Case  | Writing test cases helps ensure quality.                   |
| OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
| Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
+----------------------+------------------------------------------------------------+
UPDATE fts_basic_dml_articles SET title = 'Fulltext Index' WHERE title like '%Fulltext Indexing%';
select * from fts_basic_dml_articles order by title;
+----------------------+------------------------------------------------------------+
| title                | content                                                    |
+----------------------+------------------------------------------------------------+
| Fulltext Index       | Fulltext index can be very useful.                         |
| How to use Database  | This is a using tutorial about Databases.                  |
| OceanBase Test Case  | Writing test cases helps ensure quality.                   |
| OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
| Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
+----------------------+------------------------------------------------------------+
+--------------+--------+------------+------------+
| word         | doc_id | word_count | doc_length |
+--------------+--------+------------+------------+
| can          |      2 |          1 |          7 |
| case         |      3 |          1 |          9 |
| cases        |      3 |          1 |          9 |
| database     |      4 |          1 |          7 |
| database     |      5 |          1 |          5 |
| databases    |      5 |          1 |          5 |
| ensure       |      3 |          1 |          9 |
| fulltext     |      1 |          1 |          5 |
| fulltext     |      2 |          2 |          7 |
| guide        |      4 |          1 |          7 |
| helps        |      3 |          1 |          9 |
| index        |      2 |          2 |          7 |
| oceanbase    |      1 |          2 |          5 |
| oceanbase    |      3 |          1 |          9 |
| oceanbase    |      4 |          2 |          7 |
| optimization |      4 |          1 |          7 |
| optimizing   |      4 |          1 |          7 |
| quality      |      3 |          1 |          9 |
| query        |      4 |          1 |          7 |
| test         |      3 |          2 |          9 |
| tutorial     |      1 |          2 |          5 |
| tutorial     |      5 |          1 |          5 |
| use          |      5 |          1 |          5 |
| useful       |      2 |          1 |          7 |
| using        |      5 |          1 |          5 |
| very         |      2 |          1 |          7 |
| writing      |      3 |          1 |          9 |
+--------------+--------+------------+------------+
+--------+--------------+------------+------------+
| doc_id | word         | word_count | doc_lenght |
+--------+--------------+------------+------------+
|      1 | fulltext     |          1 |          5 |
|      1 | oceanbase    |          2 |          5 |
|      1 | tutorial     |          2 |          5 |
|      2 | can          |          1 |          7 |
|      2 | fulltext     |          2 |          7 |
|      2 | index        |          2 |          7 |
|      2 | useful       |          1 |          7 |
|      2 | very         |          1 |          7 |
|      3 | case         |          1 |          9 |
|      3 | cases        |          1 |          9 |
|      3 | ensure       |          1 |          9 |
|      3 | helps        |          1 |          9 |
|      3 | oceanbase    |          1 |          9 |
|      3 | quality      |          1 |          9 |
|      3 | test         |          2 |          9 |
|      3 | writing      |          1 |          9 |
|      4 | database     |          1 |          7 |
|      4 | guide        |          1 |          7 |
|      4 | oceanbase    |          2 |          7 |
|      4 | optimization |          1 |          7 |
|      4 | optimizing   |          1 |          7 |
|      4 | query        |          1 |          7 |
|      5 | database     |          1 |          5 |
|      5 | databases    |          1 |          5 |
|      5 | tutorial     |          1 |          5 |
|      5 | use          |          1 |          5 |
|      5 | using        |          1 |          5 |
+--------+--------------+------------+------------+
========================= delete ==========================
DELETE FROM fts_basic_dml_articles WHERE title = 'Optimizing OceanBase';
select * from fts_basic_dml_articles order by title;
+---------------------+----------------------------------------------+
| title               | content                                      |
+---------------------+----------------------------------------------+
| Fulltext Index      | Fulltext index can be very useful.           |
| How to use Database | This is a using tutorial about Databases.    |
| OceanBase Test Case | Writing test cases helps ensure quality.     |
| OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
+---------------------+----------------------------------------------+
+-----------+--------+------------+------------+
| word      | doc_id | word_count | doc_length |
+-----------+--------+------------+------------+
| can       |      2 |          1 |          7 |
| case      |      3 |          1 |          9 |
| cases     |      3 |          1 |          9 |
| database  |      5 |          1 |          5 |
| databases |      5 |          1 |          5 |
| ensure    |      3 |          1 |          9 |
| fulltext  |      1 |          1 |          5 |
| fulltext  |      2 |          2 |          7 |
| helps     |      3 |          1 |          9 |
| index     |      2 |          2 |          7 |
| oceanbase |      1 |          2 |          5 |
| oceanbase |      3 |          1 |          9 |
| quality   |      3 |          1 |          9 |
| test      |      3 |          2 |          9 |
| tutorial  |      1 |          2 |          5 |
| tutorial  |      5 |          1 |          5 |
| use       |      5 |          1 |          5 |
| useful    |      2 |          1 |          7 |
| using     |      5 |          1 |          5 |
| very      |      2 |          1 |          7 |
| writing   |      3 |          1 |          9 |
+-----------+--------+------------+------------+
+--------+-----------+------------+------------+
| doc_id | word      | word_count | doc_lenght |
+--------+-----------+------------+------------+
|      1 | fulltext  |          1 |          5 |
|      1 | oceanbase |          2 |          5 |
|      1 | tutorial  |          2 |          5 |
|      2 | can       |          1 |          7 |
|      2 | fulltext  |          2 |          7 |
|      2 | index     |          2 |          7 |
|      2 | useful    |          1 |          7 |
|      2 | very      |          1 |          7 |
|      3 | case      |          1 |          9 |
|      3 | cases     |          1 |          9 |
|      3 | ensure    |          1 |          9 |
|      3 | helps     |          1 |          9 |
|      3 | oceanbase |          1 |          9 |
|      3 | quality   |          1 |          9 |
|      3 | test      |          2 |          9 |
|      3 | writing   |          1 |          9 |
|      5 | database  |          1 |          5 |
|      5 | databases |          1 |          5 |
|      5 | tutorial  |          1 |          5 |
|      5 | use       |          1 |          5 |
|      5 | using     |          1 |          5 |
+--------+-----------+------------+------------+
========================== drop ===========================
DROP TABLE fts_basic_dml_articles;
############ Create Table With Primary Key ###############
======================== create ==========================
CREATE TABLE fts_basic_dml_articles (
    title VARCHAR(200) PRIMARY KEY,
    content TEXT,
    FULLTEXT INDEX ctx(title, content)
);
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `title` varchar(200) NOT NULL,
  `content` text DEFAULT NULL,
  PRIMARY KEY (`title`),
  FULLTEXT KEY `ctx` (`title`, `content`) WITH PARSER space PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384
) ORGANIZATION INDEX DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = replica_num BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE ENABLE_MACRO_BLOCK_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0
SHOW INDEX FROM fts_basic_dml_articles;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment	Visible	Expression
fts_basic_dml_articles	0	PRIMARY	1	title	A	NULL	NULL	NULL		BTREE	available		YES	NULL
fts_basic_dml_articles	1	ctx	1	title	A	NULL	NULL	NULL		FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx	2	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
======================== insert ==========================
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('OceanBase Tutorial', 'This is a tutorial about Oceanbase Fulltext.'),
('Fulltext Index', 'Fulltext index can be very useful.'),
('OceanBase Test Case', 'Writing test cases helps ensure quality.');
select * from fts_basic_dml_articles order by title;
+---------------------+----------------------------------------------+
| title               | content                                      |
+---------------------+----------------------------------------------+
| Fulltext Index      | Fulltext index can be very useful.           |
| OceanBase Test Case | Writing test cases helps ensure quality.     |
| OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
+---------------------+----------------------------------------------+
+---------------------+------------------+
| title               | doc_id           |
+---------------------+------------------+
| Fulltext Index      | 0200000000000000 |
| OceanBase Test Case | 0300000000000000 |
| OceanBase Tutorial  | 0100000000000000 |
+---------------------+------------------+
+------------------+---------------------+
| doc_id           | title               |
+------------------+---------------------+
| 0100000000000000 | OceanBase Tutorial  |
| 0200000000000000 | Fulltext Index      |
| 0300000000000000 | OceanBase Test Case |
+------------------+---------------------+
+-----------+------------------+------------+------------+
| word      | doc_id           | word_count | doc_length |
+-----------+------------------+------------+------------+
| can       | 0200000000000000 |          1 |          7 |
| case      | 0300000000000000 |          1 |          9 |
| cases     | 0300000000000000 |          1 |          9 |
| ensure    | 0300000000000000 |          1 |          9 |
| fulltext  | 0100000000000000 |          1 |          5 |
| fulltext  | 0200000000000000 |          2 |          7 |
| helps     | 0300000000000000 |          1 |          9 |
| index     | 0200000000000000 |          2 |          7 |
| oceanbase | 0100000000000000 |          2 |          5 |
| oceanbase | 0300000000000000 |          1 |          9 |
| quality   | 0300000000000000 |          1 |          9 |
| test      | 0300000000000000 |          2 |          9 |
| tutorial  | 0100000000000000 |          2 |          5 |
| useful    | 0200000000000000 |          1 |          7 |
| very      | 0200000000000000 |          1 |          7 |
| writing   | 0300000000000000 |          1 |          9 |
+-----------+------------------+------------+------------+
+------------------+-----------+------------+------------+
| doc_id           | word      | word_count | doc_lenght |
+------------------+-----------+------------+------------+
| 0100000000000000 | fulltext  |          1 |          5 |
| 0100000000000000 | oceanbase |          2 |          5 |
| 0100000000000000 | tutorial  |          2 |          5 |
| 0200000000000000 | can       |          1 |          7 |
| 0200000000000000 | fulltext  |          2 |          7 |
| 0200000000000000 | index     |          2 |          7 |
| 0200000000000000 | useful    |          1 |          7 |
| 0200000000000000 | very      |          1 |          7 |
| 0300000000000000 | case      |          1 |          9 |
| 0300000000000000 | cases     |          1 |          9 |
| 0300000000000000 | ensure    |          1 |          9 |
| 0300000000000000 | helps     |          1 |          9 |
| 0300000000000000 | oceanbase |          1 |          9 |
| 0300000000000000 | quality   |          1 |          9 |
| 0300000000000000 | test      |          2 |          9 |
| 0300000000000000 | writing   |          1 |          9 |
+------------------+-----------+------------+------------+
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('Optimizing OceanBase', 'This is a query optimization guide for OceanBase Database.'),
('How to use Database', 'This is a using tutorial about Databases.');
select * from fts_basic_dml_articles order by title;
+----------------------+------------------------------------------------------------+
| title                | content                                                    |
+----------------------+------------------------------------------------------------+
| Fulltext Index       | Fulltext index can be very useful.                         |
| How to use Database  | This is a using tutorial about Databases.                  |
| OceanBase Test Case  | Writing test cases helps ensure quality.                   |
| OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
| Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
+----------------------+------------------------------------------------------------+
+----------------------+------------------+
| title                | doc_id           |
+----------------------+------------------+
| Fulltext Index       | 0200000000000000 |
| How to use Database  | 0500000000000000 |
| OceanBase Test Case  | 0300000000000000 |
| OceanBase Tutorial   | 0100000000000000 |
| Optimizing OceanBase | 0400000000000000 |
+----------------------+------------------+
+------------------+----------------------+
| doc_id           | title                |
+------------------+----------------------+
| 0100000000000000 | OceanBase Tutorial   |
| 0200000000000000 | Fulltext Index       |
| 0300000000000000 | OceanBase Test Case  |
| 0400000000000000 | Optimizing OceanBase |
| 0500000000000000 | How to use Database  |
+------------------+----------------------+
+--------------+------------------+------------+------------+
| word         | doc_id           | word_count | doc_length |
+--------------+------------------+------------+------------+
| can          | 0200000000000000 |          1 |          7 |
| case         | 0300000000000000 |          1 |          9 |
| cases        | 0300000000000000 |          1 |          9 |
| database     | 0400000000000000 |          1 |          7 |
| database     | 0500000000000000 |          1 |          5 |
| databases    | 0500000000000000 |          1 |          5 |
| ensure       | 0300000000000000 |          1 |          9 |
| fulltext     | 0100000000000000 |          1 |          5 |
| fulltext     | 0200000000000000 |          2 |          7 |
| guide        | 0400000000000000 |          1 |          7 |
| helps        | 0300000000000000 |          1 |          9 |
| index        | 0200000000000000 |          2 |          7 |
| oceanbase    | 0100000000000000 |          2 |          5 |
| oceanbase    | 0300000000000000 |          1 |          9 |
| oceanbase    | 0400000000000000 |          2 |          7 |
| optimization | 0400000000000000 |          1 |          7 |
| optimizing   | 0400000000000000 |          1 |          7 |
| quality      | 0300000000000000 |          1 |          9 |
| query        | 0400000000000000 |          1 |          7 |
| test         | 0300000000000000 |          2 |          9 |
| tutorial     | 0100000000000000 |          2 |          5 |
| tutorial     | 0500000000000000 |          1 |          5 |
| use          | 0500000000000000 |          1 |          5 |
| useful       | 0200000000000000 |          1 |          7 |
| using        | 0500000000000000 |          1 |          5 |
| very         | 0200000000000000 |          1 |          7 |
| writing      | 0300000000000000 |          1 |          9 |
+--------------+------------------+------------+------------+
+------------------+--------------+------------+------------+
| doc_id           | word         | word_count | doc_lenght |
+------------------+--------------+------------+------------+
| 0100000000000000 | fulltext     |          1 |          5 |
| 0100000000000000 | oceanbase    |          2 |          5 |
| 0100000000000000 | tutorial     |          2 |          5 |
| 0200000000000000 | can          |          1 |          7 |
| 0200000000000000 | fulltext     |          2 |          7 |
| 0200000000000000 | index        |          2 |          7 |
| 0200000000000000 | useful       |          1 |          7 |
| 0200000000000000 | very         |          1 |          7 |
| 0300000000000000 | case         |          1 |          9 |
| 0300000000000000 | cases        |          1 |          9 |
| 0300000000000000 | ensure       |          1 |          9 |
| 0300000000000000 | helps        |          1 |          9 |
| 0300000000000000 | oceanbase    |          1 |          9 |
| 0300000000000000 | quality      |          1 |          9 |
| 0300000000000000 | test         |          2 |          9 |
| 0300000000000000 | writing      |          1 |          9 |
| 0400000000000000 | database     |          1 |          7 |
| 0400000000000000 | guide        |          1 |          7 |
| 0400000000000000 | oceanbase    |          2 |          7 |
| 0400000000000000 | optimization |          1 |          7 |
| 0400000000000000 | optimizing   |          1 |          7 |
| 0400000000000000 | query        |          1 |          7 |
| 0500000000000000 | database     |          1 |          5 |
| 0500000000000000 | databases    |          1 |          5 |
| 0500000000000000 | tutorial     |          1 |          5 |
| 0500000000000000 | use          |          1 |          5 |
| 0500000000000000 | using        |          1 |          5 |
+------------------+--------------+------------+------------+
========================= update ==========================
UPDATE fts_basic_dml_articles SET title = 'Fulltext Indexing' WHERE title = 'Fulltext Index';
select * from fts_basic_dml_articles order by title;
+----------------------+------------------------------------------------------------+
| title                | content                                                    |
+----------------------+------------------------------------------------------------+
| Fulltext Indexing    | Fulltext index can be very useful.                         |
| How to use Database  | This is a using tutorial about Databases.                  |
| OceanBase Test Case  | Writing test cases helps ensure quality.                   |
| OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
| Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
+----------------------+------------------------------------------------------------+
+----------------------+------------------+
| title                | doc_id           |
+----------------------+------------------+
| Fulltext Indexing    | 0200000000000000 |
| How to use Database  | 0500000000000000 |
| OceanBase Test Case  | 0300000000000000 |
| OceanBase Tutorial   | 0100000000000000 |
| Optimizing OceanBase | 0400000000000000 |
+----------------------+------------------+
+------------------+----------------------+
| doc_id           | title                |
+------------------+----------------------+
| 0100000000000000 | OceanBase Tutorial   |
| 0200000000000000 | Fulltext Indexing    |
| 0300000000000000 | OceanBase Test Case  |
| 0400000000000000 | Optimizing OceanBase |
| 0500000000000000 | How to use Database  |
+------------------+----------------------+
+--------------+------------------+------------+------------+
| word         | doc_id           | word_count | doc_length |
+--------------+------------------+------------+------------+
| can          | 0200000000000000 |          1 |          7 |
| case         | 0300000000000000 |          1 |          9 |
| cases        | 0300000000000000 |          1 |          9 |
| database     | 0400000000000000 |          1 |          7 |
| database     | 0500000000000000 |          1 |          5 |
| databases    | 0500000000000000 |          1 |          5 |
| ensure       | 0300000000000000 |          1 |          9 |
| fulltext     | 0100000000000000 |          1 |          5 |
| fulltext     | 0200000000000000 |          2 |          7 |
| guide        | 0400000000000000 |          1 |          7 |
| helps        | 0300000000000000 |          1 |          9 |
| index        | 0200000000000000 |          1 |          7 |
| indexing     | 0200000000000000 |          1 |          7 |
| oceanbase    | 0100000000000000 |          2 |          5 |
| oceanbase    | 0300000000000000 |          1 |          9 |
| oceanbase    | 0400000000000000 |          2 |          7 |
| optimization | 0400000000000000 |          1 |          7 |
| optimizing   | 0400000000000000 |          1 |          7 |
| quality      | 0300000000000000 |          1 |          9 |
| query        | 0400000000000000 |          1 |          7 |
| test         | 0300000000000000 |          2 |          9 |
| tutorial     | 0100000000000000 |          2 |          5 |
| tutorial     | 0500000000000000 |          1 |          5 |
| use          | 0500000000000000 |          1 |          5 |
| useful       | 0200000000000000 |          1 |          7 |
| using        | 0500000000000000 |          1 |          5 |
| very         | 0200000000000000 |          1 |          7 |
| writing      | 0300000000000000 |          1 |          9 |
+--------------+------------------+------------+------------+
+------------------+--------------+------------+------------+
| doc_id           | word         | word_count | doc_lenght |
+------------------+--------------+------------+------------+
| 0100000000000000 | fulltext     |          1 |          5 |
| 0100000000000000 | oceanbase    |          2 |          5 |
| 0100000000000000 | tutorial     |          2 |          5 |
| 0200000000000000 | can          |          1 |          7 |
| 0200000000000000 | fulltext     |          2 |          7 |
| 0200000000000000 | index        |          1 |          7 |
| 0200000000000000 | indexing     |          1 |          7 |
| 0200000000000000 | useful       |          1 |          7 |
| 0200000000000000 | very         |          1 |          7 |
| 0300000000000000 | case         |          1 |          9 |
| 0300000000000000 | cases        |          1 |          9 |
| 0300000000000000 | ensure       |          1 |          9 |
| 0300000000000000 | helps        |          1 |          9 |
| 0300000000000000 | oceanbase    |          1 |          9 |
| 0300000000000000 | quality      |          1 |          9 |
| 0300000000000000 | test         |          2 |          9 |
| 0300000000000000 | writing      |          1 |          9 |
| 0400000000000000 | database     |          1 |          7 |
| 0400000000000000 | guide        |          1 |          7 |
| 0400000000000000 | oceanbase    |          2 |          7 |
| 0400000000000000 | optimization |          1 |          7 |
| 0400000000000000 | optimizing   |          1 |          7 |
| 0400000000000000 | query        |          1 |          7 |
| 0500000000000000 | database     |          1 |          5 |
| 0500000000000000 | databases    |          1 |          5 |
| 0500000000000000 | tutorial     |          1 |          5 |
| 0500000000000000 | use          |          1 |          5 |
| 0500000000000000 | using        |          1 |          5 |
+------------------+--------------+------------+------------+
========================= delete ==========================
DELETE FROM fts_basic_dml_articles WHERE title = 'Optimizing OceanBase';
select * from fts_basic_dml_articles order by title;
+---------------------+----------------------------------------------+
| title               | content                                      |
+---------------------+----------------------------------------------+
| Fulltext Indexing   | Fulltext index can be very useful.           |
| How to use Database | This is a using tutorial about Databases.    |
| OceanBase Test Case | Writing test cases helps ensure quality.     |
| OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
+---------------------+----------------------------------------------+
+---------------------+------------------+
| title               | doc_id           |
+---------------------+------------------+
| Fulltext Indexing   | 0200000000000000 |
| How to use Database | 0500000000000000 |
| OceanBase Test Case | 0300000000000000 |
| OceanBase Tutorial  | 0100000000000000 |
+---------------------+------------------+
+------------------+---------------------+
| doc_id           | title               |
+------------------+---------------------+
| 0100000000000000 | OceanBase Tutorial  |
| 0200000000000000 | Fulltext Indexing   |
| 0300000000000000 | OceanBase Test Case |
| 0500000000000000 | How to use Database |
+------------------+---------------------+
+-----------+------------------+------------+------------+
| word      | doc_id           | word_count | doc_length |
+-----------+------------------+------------+------------+
| can       | 0200000000000000 |          1 |          7 |
| case      | 0300000000000000 |          1 |          9 |
| cases     | 0300000000000000 |          1 |          9 |
| database  | 0500000000000000 |          1 |          5 |
| databases | 0500000000000000 |          1 |          5 |
| ensure    | 0300000000000000 |          1 |          9 |
| fulltext  | 0100000000000000 |          1 |          5 |
| fulltext  | 0200000000000000 |          2 |          7 |
| helps     | 0300000000000000 |          1 |          9 |
| index     | 0200000000000000 |          1 |          7 |
| indexing  | 0200000000000000 |          1 |          7 |
| oceanbase | 0100000000000000 |          2 |          5 |
| oceanbase | 0300000000000000 |          1 |          9 |
| quality   | 0300000000000000 |          1 |          9 |
| test      | 0300000000000000 |          2 |          9 |
| tutorial  | 0100000000000000 |          2 |          5 |
| tutorial  | 0500000000000000 |          1 |          5 |
| use       | 0500000000000000 |          1 |          5 |
| useful    | 0200000000000000 |          1 |          7 |
| using     | 0500000000000000 |          1 |          5 |
| very      | 0200000000000000 |          1 |          7 |
| writing   | 0300000000000000 |          1 |          9 |
+-----------+------------------+------------+------------+
+------------------+-----------+------------+------------+
| doc_id           | word      | word_count | doc_lenght |
+------------------+-----------+------------+------------+
| 0100000000000000 | fulltext  |          1 |          5 |
| 0100000000000000 | oceanbase |          2 |          5 |
| 0100000000000000 | tutorial  |          2 |          5 |
| 0200000000000000 | can       |          1 |          7 |
| 0200000000000000 | fulltext  |          2 |          7 |
| 0200000000000000 | index     |          1 |          7 |
| 0200000000000000 | indexing  |          1 |          7 |
| 0200000000000000 | useful    |          1 |          7 |
| 0200000000000000 | very      |          1 |          7 |
| 0300000000000000 | case      |          1 |          9 |
| 0300000000000000 | cases     |          1 |          9 |
| 0300000000000000 | ensure    |          1 |          9 |
| 0300000000000000 | helps     |          1 |          9 |
| 0300000000000000 | oceanbase |          1 |          9 |
| 0300000000000000 | quality   |          1 |          9 |
| 0300000000000000 | test      |          2 |          9 |
| 0300000000000000 | writing   |          1 |          9 |
| 0500000000000000 | database  |          1 |          5 |
| 0500000000000000 | databases |          1 |          5 |
| 0500000000000000 | tutorial  |          1 |          5 |
| 0500000000000000 | use       |          1 |          5 |
| 0500000000000000 | using     |          1 |          5 |
+------------------+-----------+------------+------------+
========================== drop ===========================
DROP TABLE fts_basic_dml_articles;
######### Alter Table With Auto Increment Column #########
======================== create ==========================
CREATE TABLE fts_basic_dml_articles (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    content TEXT);
======================== insert ==========================
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('OceanBase Tutorial', 'This is a tutorial about Oceanbase Fulltext.'),
('Fulltext Index', 'Fulltext index can be very useful.'),
('OceanBase Test Case', 'Writing test cases helps ensure quality.');
select * from fts_basic_dml_articles order by id;
+----+---------------------+----------------------------------------------+
| id | title               | content                                      |
+----+---------------------+----------------------------------------------+
|  1 | OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
|  2 | Fulltext Index      | Fulltext index can be very useful.           |
|  3 | OceanBase Test Case | Writing test cases helps ensure quality.     |
+----+---------------------+----------------------------------------------+
ALTER TABLE fts_basic_dml_articles add FULLTEXT INDEX ctx(title, content) WITH PARSER space;
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(200) DEFAULT NULL,
  `content` text DEFAULT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `ctx` (`title`, `content`) WITH PARSER space PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384
) ORGANIZATION INDEX AUTO_INCREMENT = 4 AUTO_INCREMENT_MODE = 'ORDER' DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = replica_num BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE ENABLE_MACRO_BLOCK_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0
SHOW INDEX FROM fts_basic_dml_articles;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment	Visible	Expression
fts_basic_dml_articles	0	PRIMARY	1	id	A	NULL	NULL	NULL		BTREE	available		YES	NULL
fts_basic_dml_articles	1	ctx	1	title	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx	2	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
+----+
| id |
+----+
|  1 |
|  2 |
|  3 |
+----+
+-----------+----+------------+------------+
| word      | id | word_count | doc_length |
+-----------+----+------------+------------+
| can       |  2 |          1 |          7 |
| case      |  3 |          1 |          9 |
| cases     |  3 |          1 |          9 |
| ensure    |  3 |          1 |          9 |
| fulltext  |  1 |          1 |          5 |
| fulltext  |  2 |          2 |          7 |
| helps     |  3 |          1 |          9 |
| index     |  2 |          2 |          7 |
| oceanbase |  1 |          2 |          5 |
| oceanbase |  3 |          1 |          9 |
| quality   |  3 |          1 |          9 |
| test      |  3 |          2 |          9 |
| tutorial  |  1 |          2 |          5 |
| useful    |  2 |          1 |          7 |
| very      |  2 |          1 |          7 |
| writing   |  3 |          1 |          9 |
+-----------+----+------------+------------+
+----+-----------+------------+------------+
| id | word      | word_count | doc_length |
+----+-----------+------------+------------+
|  1 | fulltext  |          1 |          5 |
|  1 | oceanbase |          2 |          5 |
|  1 | tutorial  |          2 |          5 |
|  2 | can       |          1 |          7 |
|  2 | fulltext  |          2 |          7 |
|  2 | index     |          2 |          7 |
|  2 | useful    |          1 |          7 |
|  2 | very      |          1 |          7 |
|  3 | case      |          1 |          9 |
|  3 | cases     |          1 |          9 |
|  3 | ensure    |          1 |          9 |
|  3 | helps     |          1 |          9 |
|  3 | oceanbase |          1 |          9 |
|  3 | quality   |          1 |          9 |
|  3 | test      |          2 |          9 |
|  3 | writing   |          1 |          9 |
+----+-----------+------------+------------+
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('Optimizing OceanBase', 'This is a query optimization guide for OceanBase Database.'),
('How to use Database', 'This is a using tutorial about Databases.');
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  1 | OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
|  2 | Fulltext Index       | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+
| id |
+----+
|  1 |
|  2 |
|  3 |
|  4 |
|  5 |
+----+
+--------------+----+------------+------------+
| word         | id | word_count | doc_length |
+--------------+----+------------+------------+
| can          |  2 |          1 |          7 |
| case         |  3 |          1 |          9 |
| cases        |  3 |          1 |          9 |
| database     |  4 |          1 |          7 |
| database     |  5 |          1 |          5 |
| databases    |  5 |          1 |          5 |
| ensure       |  3 |          1 |          9 |
| fulltext     |  1 |          1 |          5 |
| fulltext     |  2 |          2 |          7 |
| guide        |  4 |          1 |          7 |
| helps        |  3 |          1 |          9 |
| index        |  2 |          2 |          7 |
| oceanbase    |  1 |          2 |          5 |
| oceanbase    |  3 |          1 |          9 |
| oceanbase    |  4 |          2 |          7 |
| optimization |  4 |          1 |          7 |
| optimizing   |  4 |          1 |          7 |
| quality      |  3 |          1 |          9 |
| query        |  4 |          1 |          7 |
| test         |  3 |          2 |          9 |
| tutorial     |  1 |          2 |          5 |
| tutorial     |  5 |          1 |          5 |
| use          |  5 |          1 |          5 |
| useful       |  2 |          1 |          7 |
| using        |  5 |          1 |          5 |
| very         |  2 |          1 |          7 |
| writing      |  3 |          1 |          9 |
+--------------+----+------------+------------+
+----+--------------+------------+------------+
| id | word         | word_count | doc_length |
+----+--------------+------------+------------+
|  1 | fulltext     |          1 |          5 |
|  1 | oceanbase    |          2 |          5 |
|  1 | tutorial     |          2 |          5 |
|  2 | can          |          1 |          7 |
|  2 | fulltext     |          2 |          7 |
|  2 | index        |          2 |          7 |
|  2 | useful       |          1 |          7 |
|  2 | very         |          1 |          7 |
|  3 | case         |          1 |          9 |
|  3 | cases        |          1 |          9 |
|  3 | ensure       |          1 |          9 |
|  3 | helps        |          1 |          9 |
|  3 | oceanbase    |          1 |          9 |
|  3 | quality      |          1 |          9 |
|  3 | test         |          2 |          9 |
|  3 | writing      |          1 |          9 |
|  4 | database     |          1 |          7 |
|  4 | guide        |          1 |          7 |
|  4 | oceanbase    |          2 |          7 |
|  4 | optimization |          1 |          7 |
|  4 | optimizing   |          1 |          7 |
|  4 | query        |          1 |          7 |
|  5 | database     |          1 |          5 |
|  5 | databases    |          1 |          5 |
|  5 | tutorial     |          1 |          5 |
|  5 | use          |          1 |          5 |
|  5 | using        |          1 |          5 |
+----+--------------+------------+------------+
========================= update ==========================
UPDATE fts_basic_dml_articles SET title = 'Fulltext Indexing' WHERE id = 2;
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  1 | OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
|  2 | Fulltext Indexing    | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+
| id |
+----+
|  1 |
|  2 |
|  3 |
|  4 |
|  5 |
+----+
+--------------+----+------------+------------+
| word         | id | word_count | doc_length |
+--------------+----+------------+------------+
| can          |  2 |          1 |          7 |
| case         |  3 |          1 |          9 |
| cases        |  3 |          1 |          9 |
| database     |  4 |          1 |          7 |
| database     |  5 |          1 |          5 |
| databases    |  5 |          1 |          5 |
| ensure       |  3 |          1 |          9 |
| fulltext     |  1 |          1 |          5 |
| fulltext     |  2 |          2 |          7 |
| guide        |  4 |          1 |          7 |
| helps        |  3 |          1 |          9 |
| index        |  2 |          1 |          7 |
| indexing     |  2 |          1 |          7 |
| oceanbase    |  1 |          2 |          5 |
| oceanbase    |  3 |          1 |          9 |
| oceanbase    |  4 |          2 |          7 |
| optimization |  4 |          1 |          7 |
| optimizing   |  4 |          1 |          7 |
| quality      |  3 |          1 |          9 |
| query        |  4 |          1 |          7 |
| test         |  3 |          2 |          9 |
| tutorial     |  1 |          2 |          5 |
| tutorial     |  5 |          1 |          5 |
| use          |  5 |          1 |          5 |
| useful       |  2 |          1 |          7 |
| using        |  5 |          1 |          5 |
| very         |  2 |          1 |          7 |
| writing      |  3 |          1 |          9 |
+--------------+----+------------+------------+
+----+--------------+------------+------------+
| id | word         | word_count | doc_length |
+----+--------------+------------+------------+
|  1 | fulltext     |          1 |          5 |
|  1 | oceanbase    |          2 |          5 |
|  1 | tutorial     |          2 |          5 |
|  2 | can          |          1 |          7 |
|  2 | fulltext     |          2 |          7 |
|  2 | index        |          1 |          7 |
|  2 | indexing     |          1 |          7 |
|  2 | useful       |          1 |          7 |
|  2 | very         |          1 |          7 |
|  3 | case         |          1 |          9 |
|  3 | cases        |          1 |          9 |
|  3 | ensure       |          1 |          9 |
|  3 | helps        |          1 |          9 |
|  3 | oceanbase    |          1 |          9 |
|  3 | quality      |          1 |          9 |
|  3 | test         |          2 |          9 |
|  3 | writing      |          1 |          9 |
|  4 | database     |          1 |          7 |
|  4 | guide        |          1 |          7 |
|  4 | oceanbase    |          2 |          7 |
|  4 | optimization |          1 |          7 |
|  4 | optimizing   |          1 |          7 |
|  4 | query        |          1 |          7 |
|  5 | database     |          1 |          5 |
|  5 | databases    |          1 |          5 |
|  5 | tutorial     |          1 |          5 |
|  5 | use          |          1 |          5 |
|  5 | using        |          1 |          5 |
+----+--------------+------------+------------+
========================= delete ==========================
DELETE FROM fts_basic_dml_articles WHERE id = 1;
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  2 | Fulltext Indexing    | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+
| id |
+----+
|  2 |
|  3 |
|  4 |
|  5 |
+----+
+--------------+----+------------+------------+
| word         | id | word_count | doc_length |
+--------------+----+------------+------------+
| can          |  2 |          1 |          7 |
| case         |  3 |          1 |          9 |
| cases        |  3 |          1 |          9 |
| database     |  4 |          1 |          7 |
| database     |  5 |          1 |          5 |
| databases    |  5 |          1 |          5 |
| ensure       |  3 |          1 |          9 |
| fulltext     |  2 |          2 |          7 |
| guide        |  4 |          1 |          7 |
| helps        |  3 |          1 |          9 |
| index        |  2 |          1 |          7 |
| indexing     |  2 |          1 |          7 |
| oceanbase    |  3 |          1 |          9 |
| oceanbase    |  4 |          2 |          7 |
| optimization |  4 |          1 |          7 |
| optimizing   |  4 |          1 |          7 |
| quality      |  3 |          1 |          9 |
| query        |  4 |          1 |          7 |
| test         |  3 |          2 |          9 |
| tutorial     |  5 |          1 |          5 |
| use          |  5 |          1 |          5 |
| useful       |  2 |          1 |          7 |
| using        |  5 |          1 |          5 |
| very         |  2 |          1 |          7 |
| writing      |  3 |          1 |          9 |
+--------------+----+------------+------------+
+----+--------------+------------+------------+
| id | word         | word_count | doc_length |
+----+--------------+------------+------------+
|  2 | can          |          1 |          7 |
|  2 | fulltext     |          2 |          7 |
|  2 | index        |          1 |          7 |
|  2 | indexing     |          1 |          7 |
|  2 | useful       |          1 |          7 |
|  2 | very         |          1 |          7 |
|  3 | case         |          1 |          9 |
|  3 | cases        |          1 |          9 |
|  3 | ensure       |          1 |          9 |
|  3 | helps        |          1 |          9 |
|  3 | oceanbase    |          1 |          9 |
|  3 | quality      |          1 |          9 |
|  3 | test         |          2 |          9 |
|  3 | writing      |          1 |          9 |
|  4 | database     |          1 |          7 |
|  4 | guide        |          1 |          7 |
|  4 | oceanbase    |          2 |          7 |
|  4 | optimization |          1 |          7 |
|  4 | optimizing   |          1 |          7 |
|  4 | query        |          1 |          7 |
|  5 | database     |          1 |          5 |
|  5 | databases    |          1 |          5 |
|  5 | tutorial     |          1 |          5 |
|  5 | use          |          1 |          5 |
|  5 | using        |          1 |          5 |
+----+--------------+------------+------------+
========================== drop ===========================
DROP TABLE fts_basic_dml_articles;
############ Alter Table With No Primary Key #############
======================== create ==========================
CREATE TABLE fts_basic_dml_articles (
    title VARCHAR(200),
    content TEXT);
ALTER TABLE fts_basic_dml_articles add FULLTEXT INDEX ctx(title, content);
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `title` varchar(200) DEFAULT NULL,
  `content` text DEFAULT NULL,
  FULLTEXT KEY `ctx` (`title`, `content`) WITH PARSER space PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384
) ORGANIZATION INDEX DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = replica_num BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE ENABLE_MACRO_BLOCK_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0
SHOW INDEX FROM fts_basic_dml_articles;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment	Visible	Expression
fts_basic_dml_articles	1	ctx	1	title	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx	2	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
======================== insert ==========================
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('OceanBase Tutorial', 'This is a tutorial about Oceanbase Fulltext.'),
('Fulltext Index', 'Fulltext index can be very useful.'),
('OceanBase Test Case', 'Writing test cases helps ensure quality.');
select * from fts_basic_dml_articles order by title;
+---------------------+----------------------------------------------+
| title               | content                                      |
+---------------------+----------------------------------------------+
| Fulltext Index      | Fulltext index can be very useful.           |
| OceanBase Test Case | Writing test cases helps ensure quality.     |
| OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
+---------------------+----------------------------------------------+
+-----------+--------+------------+------------+
| word      | doc_id | word_count | doc_length |
+-----------+--------+------------+------------+
| can       |      2 |          1 |          7 |
| case      |      3 |          1 |          9 |
| cases     |      3 |          1 |          9 |
| ensure    |      3 |          1 |          9 |
| fulltext  |      1 |          1 |          5 |
| fulltext  |      2 |          2 |          7 |
| helps     |      3 |          1 |          9 |
| index     |      2 |          2 |          7 |
| oceanbase |      1 |          2 |          5 |
| oceanbase |      3 |          1 |          9 |
| quality   |      3 |          1 |          9 |
| test      |      3 |          2 |          9 |
| tutorial  |      1 |          2 |          5 |
| useful    |      2 |          1 |          7 |
| very      |      2 |          1 |          7 |
| writing   |      3 |          1 |          9 |
+-----------+--------+------------+------------+
+--------+-----------+------------+------------+
| doc_id | word      | word_count | doc_lenght |
+--------+-----------+------------+------------+
|      1 | fulltext  |          1 |          5 |
|      1 | oceanbase |          2 |          5 |
|      1 | tutorial  |          2 |          5 |
|      2 | can       |          1 |          7 |
|      2 | fulltext  |          2 |          7 |
|      2 | index     |          2 |          7 |
|      2 | useful    |          1 |          7 |
|      2 | very      |          1 |          7 |
|      3 | case      |          1 |          9 |
|      3 | cases     |          1 |          9 |
|      3 | ensure    |          1 |          9 |
|      3 | helps     |          1 |          9 |
|      3 | oceanbase |          1 |          9 |
|      3 | quality   |          1 |          9 |
|      3 | test      |          2 |          9 |
|      3 | writing   |          1 |          9 |
+--------+-----------+------------+------------+
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('Optimizing OceanBase', 'This is a query optimization guide for OceanBase Database.'),
('How to use Database', 'This is a using tutorial about Databases.');
select * from fts_basic_dml_articles order by title;
+----------------------+------------------------------------------------------------+
| title                | content                                                    |
+----------------------+------------------------------------------------------------+
| Fulltext Index       | Fulltext index can be very useful.                         |
| How to use Database  | This is a using tutorial about Databases.                  |
| OceanBase Test Case  | Writing test cases helps ensure quality.                   |
| OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
| Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
+----------------------+------------------------------------------------------------+
+--------------+--------+------------+------------+
| word         | doc_id | word_count | doc_length |
+--------------+--------+------------+------------+
| can          |      2 |          1 |          7 |
| case         |      3 |          1 |          9 |
| cases        |      3 |          1 |          9 |
| database     |      4 |          1 |          7 |
| database     |      5 |          1 |          5 |
| databases    |      5 |          1 |          5 |
| ensure       |      3 |          1 |          9 |
| fulltext     |      1 |          1 |          5 |
| fulltext     |      2 |          2 |          7 |
| guide        |      4 |          1 |          7 |
| helps        |      3 |          1 |          9 |
| index        |      2 |          2 |          7 |
| oceanbase    |      1 |          2 |          5 |
| oceanbase    |      3 |          1 |          9 |
| oceanbase    |      4 |          2 |          7 |
| optimization |      4 |          1 |          7 |
| optimizing   |      4 |          1 |          7 |
| quality      |      3 |          1 |          9 |
| query        |      4 |          1 |          7 |
| test         |      3 |          2 |          9 |
| tutorial     |      1 |          2 |          5 |
| tutorial     |      5 |          1 |          5 |
| use          |      5 |          1 |          5 |
| useful       |      2 |          1 |          7 |
| using        |      5 |          1 |          5 |
| very         |      2 |          1 |          7 |
| writing      |      3 |          1 |          9 |
+--------------+--------+------------+------------+
+--------+--------------+------------+------------+
| doc_id | word         | word_count | doc_lenght |
+--------+--------------+------------+------------+
|      1 | fulltext     |          1 |          5 |
|      1 | oceanbase    |          2 |          5 |
|      1 | tutorial     |          2 |          5 |
|      2 | can          |          1 |          7 |
|      2 | fulltext     |          2 |          7 |
|      2 | index        |          2 |          7 |
|      2 | useful       |          1 |          7 |
|      2 | very         |          1 |          7 |
|      3 | case         |          1 |          9 |
|      3 | cases        |          1 |          9 |
|      3 | ensure       |          1 |          9 |
|      3 | helps        |          1 |          9 |
|      3 | oceanbase    |          1 |          9 |
|      3 | quality      |          1 |          9 |
|      3 | test         |          2 |          9 |
|      3 | writing      |          1 |          9 |
|      4 | database     |          1 |          7 |
|      4 | guide        |          1 |          7 |
|      4 | oceanbase    |          2 |          7 |
|      4 | optimization |          1 |          7 |
|      4 | optimizing   |          1 |          7 |
|      4 | query        |          1 |          7 |
|      5 | database     |          1 |          5 |
|      5 | databases    |          1 |          5 |
|      5 | tutorial     |          1 |          5 |
|      5 | use          |          1 |          5 |
|      5 | using        |          1 |          5 |
+--------+--------------+------------+------------+
========================= update ==========================
UPDATE fts_basic_dml_articles SET title = 'Fulltext Indexing' WHERE title = 'Fulltext Index';
select * from fts_basic_dml_articles order by title;
+----------------------+------------------------------------------------------------+
| title                | content                                                    |
+----------------------+------------------------------------------------------------+
| Fulltext Indexing    | Fulltext index can be very useful.                         |
| How to use Database  | This is a using tutorial about Databases.                  |
| OceanBase Test Case  | Writing test cases helps ensure quality.                   |
| OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
| Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
+----------------------+------------------------------------------------------------+
+--------------+--------+------------+------------+
| word         | doc_id | word_count | doc_length |
+--------------+--------+------------+------------+
| can          |      2 |          1 |          7 |
| case         |      3 |          1 |          9 |
| cases        |      3 |          1 |          9 |
| database     |      4 |          1 |          7 |
| database     |      5 |          1 |          5 |
| databases    |      5 |          1 |          5 |
| ensure       |      3 |          1 |          9 |
| fulltext     |      1 |          1 |          5 |
| fulltext     |      2 |          2 |          7 |
| guide        |      4 |          1 |          7 |
| helps        |      3 |          1 |          9 |
| index        |      2 |          1 |          7 |
| indexing     |      2 |          1 |          7 |
| oceanbase    |      1 |          2 |          5 |
| oceanbase    |      3 |          1 |          9 |
| oceanbase    |      4 |          2 |          7 |
| optimization |      4 |          1 |          7 |
| optimizing   |      4 |          1 |          7 |
| quality      |      3 |          1 |          9 |
| query        |      4 |          1 |          7 |
| test         |      3 |          2 |          9 |
| tutorial     |      1 |          2 |          5 |
| tutorial     |      5 |          1 |          5 |
| use          |      5 |          1 |          5 |
| useful       |      2 |          1 |          7 |
| using        |      5 |          1 |          5 |
| very         |      2 |          1 |          7 |
| writing      |      3 |          1 |          9 |
+--------------+--------+------------+------------+
+--------+--------------+------------+------------+
| doc_id | word         | word_count | doc_lenght |
+--------+--------------+------------+------------+
|      1 | fulltext     |          1 |          5 |
|      1 | oceanbase    |          2 |          5 |
|      1 | tutorial     |          2 |          5 |
|      2 | can          |          1 |          7 |
|      2 | fulltext     |          2 |          7 |
|      2 | index        |          1 |          7 |
|      2 | indexing     |          1 |          7 |
|      2 | useful       |          1 |          7 |
|      2 | very         |          1 |          7 |
|      3 | case         |          1 |          9 |
|      3 | cases        |          1 |          9 |
|      3 | ensure       |          1 |          9 |
|      3 | helps        |          1 |          9 |
|      3 | oceanbase    |          1 |          9 |
|      3 | quality      |          1 |          9 |
|      3 | test         |          2 |          9 |
|      3 | writing      |          1 |          9 |
|      4 | database     |          1 |          7 |
|      4 | guide        |          1 |          7 |
|      4 | oceanbase    |          2 |          7 |
|      4 | optimization |          1 |          7 |
|      4 | optimizing   |          1 |          7 |
|      4 | query        |          1 |          7 |
|      5 | database     |          1 |          5 |
|      5 | databases    |          1 |          5 |
|      5 | tutorial     |          1 |          5 |
|      5 | use          |          1 |          5 |
|      5 | using        |          1 |          5 |
+--------+--------------+------------+------------+
========================= delete ==========================
DELETE FROM fts_basic_dml_articles WHERE title = 'Optimizing OceanBase';
select * from fts_basic_dml_articles order by title;
+---------------------+----------------------------------------------+
| title               | content                                      |
+---------------------+----------------------------------------------+
| Fulltext Indexing   | Fulltext index can be very useful.           |
| How to use Database | This is a using tutorial about Databases.    |
| OceanBase Test Case | Writing test cases helps ensure quality.     |
| OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
+---------------------+----------------------------------------------+
+-----------+--------+------------+------------+
| word      | doc_id | word_count | doc_length |
+-----------+--------+------------+------------+
| can       |      2 |          1 |          7 |
| case      |      3 |          1 |          9 |
| cases     |      3 |          1 |          9 |
| database  |      5 |          1 |          5 |
| databases |      5 |          1 |          5 |
| ensure    |      3 |          1 |          9 |
| fulltext  |      1 |          1 |          5 |
| fulltext  |      2 |          2 |          7 |
| helps     |      3 |          1 |          9 |
| index     |      2 |          1 |          7 |
| indexing  |      2 |          1 |          7 |
| oceanbase |      1 |          2 |          5 |
| oceanbase |      3 |          1 |          9 |
| quality   |      3 |          1 |          9 |
| test      |      3 |          2 |          9 |
| tutorial  |      1 |          2 |          5 |
| tutorial  |      5 |          1 |          5 |
| use       |      5 |          1 |          5 |
| useful    |      2 |          1 |          7 |
| using     |      5 |          1 |          5 |
| very      |      2 |          1 |          7 |
| writing   |      3 |          1 |          9 |
+-----------+--------+------------+------------+
+--------+-----------+------------+------------+
| doc_id | word      | word_count | doc_lenght |
+--------+-----------+------------+------------+
|      1 | fulltext  |          1 |          5 |
|      1 | oceanbase |          2 |          5 |
|      1 | tutorial  |          2 |          5 |
|      2 | can       |          1 |          7 |
|      2 | fulltext  |          2 |          7 |
|      2 | index     |          1 |          7 |
|      2 | indexing  |          1 |          7 |
|      2 | useful    |          1 |          7 |
|      2 | very      |          1 |          7 |
|      3 | case      |          1 |          9 |
|      3 | cases     |          1 |          9 |
|      3 | ensure    |          1 |          9 |
|      3 | helps     |          1 |          9 |
|      3 | oceanbase |          1 |          9 |
|      3 | quality   |          1 |          9 |
|      3 | test      |          2 |          9 |
|      3 | writing   |          1 |          9 |
|      5 | database  |          1 |          5 |
|      5 | databases |          1 |          5 |
|      5 | tutorial  |          1 |          5 |
|      5 | use       |          1 |          5 |
|      5 | using     |          1 |          5 |
+--------+-----------+------------+------------+
========================== drop ===========================
DROP TABLE fts_basic_dml_articles;
############# Alter Table With Primary Key ###############
======================== create ==========================
CREATE TABLE fts_basic_dml_articles (
    title VARCHAR(200) PRIMARY KEY,
    content TEXT);
ALTER TABLE fts_basic_dml_articles add FULLTEXT INDEX ctx(title, content);
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `title` varchar(200) NOT NULL,
  `content` text DEFAULT NULL,
  PRIMARY KEY (`title`),
  FULLTEXT KEY `ctx` (`title`, `content`) WITH PARSER space PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384
) ORGANIZATION INDEX DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = replica_num BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE ENABLE_MACRO_BLOCK_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0
SHOW INDEX FROM fts_basic_dml_articles;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment	Visible	Expression
fts_basic_dml_articles	0	PRIMARY	1	title	A	NULL	NULL	NULL		BTREE	available		YES	NULL
fts_basic_dml_articles	1	ctx	1	title	A	NULL	NULL	NULL		FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx	2	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
======================== insert ==========================
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('OceanBase Tutorial', 'This is a tutorial about Oceanbase Fulltext.'),
('Fulltext Index', 'Fulltext index can be very useful.'),
('OceanBase Test Case', 'Writing test cases helps ensure quality.');
select * from fts_basic_dml_articles order by title;
+---------------------+----------------------------------------------+
| title               | content                                      |
+---------------------+----------------------------------------------+
| Fulltext Index      | Fulltext index can be very useful.           |
| OceanBase Test Case | Writing test cases helps ensure quality.     |
| OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
+---------------------+----------------------------------------------+
+---------------------+------------------+
| title               | doc_id           |
+---------------------+------------------+
| Fulltext Index      | 0200000000000000 |
| OceanBase Test Case | 0300000000000000 |
| OceanBase Tutorial  | 0100000000000000 |
+---------------------+------------------+
+------------------+---------------------+
| doc_id           | title               |
+------------------+---------------------+
| 0100000000000000 | OceanBase Tutorial  |
| 0200000000000000 | Fulltext Index      |
| 0300000000000000 | OceanBase Test Case |
+------------------+---------------------+
+-----------+------------------+------------+------------+
| word      | doc_id           | word_count | doc_length |
+-----------+------------------+------------+------------+
| can       | 0200000000000000 |          1 |          7 |
| case      | 0300000000000000 |          1 |          9 |
| cases     | 0300000000000000 |          1 |          9 |
| ensure    | 0300000000000000 |          1 |          9 |
| fulltext  | 0100000000000000 |          1 |          5 |
| fulltext  | 0200000000000000 |          2 |          7 |
| helps     | 0300000000000000 |          1 |          9 |
| index     | 0200000000000000 |          2 |          7 |
| oceanbase | 0100000000000000 |          2 |          5 |
| oceanbase | 0300000000000000 |          1 |          9 |
| quality   | 0300000000000000 |          1 |          9 |
| test      | 0300000000000000 |          2 |          9 |
| tutorial  | 0100000000000000 |          2 |          5 |
| useful    | 0200000000000000 |          1 |          7 |
| very      | 0200000000000000 |          1 |          7 |
| writing   | 0300000000000000 |          1 |          9 |
+-----------+------------------+------------+------------+
+------------------+-----------+------------+------------+
| doc_id           | word      | word_count | doc_lenght |
+------------------+-----------+------------+------------+
| 0100000000000000 | fulltext  |          1 |          5 |
| 0100000000000000 | oceanbase |          2 |          5 |
| 0100000000000000 | tutorial  |          2 |          5 |
| 0200000000000000 | can       |          1 |          7 |
| 0200000000000000 | fulltext  |          2 |          7 |
| 0200000000000000 | index     |          2 |          7 |
| 0200000000000000 | useful    |          1 |          7 |
| 0200000000000000 | very      |          1 |          7 |
| 0300000000000000 | case      |          1 |          9 |
| 0300000000000000 | cases     |          1 |          9 |
| 0300000000000000 | ensure    |          1 |          9 |
| 0300000000000000 | helps     |          1 |          9 |
| 0300000000000000 | oceanbase |          1 |          9 |
| 0300000000000000 | quality   |          1 |          9 |
| 0300000000000000 | test      |          2 |          9 |
| 0300000000000000 | writing   |          1 |          9 |
+------------------+-----------+------------+------------+
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('Optimizing OceanBase', 'This is a query optimization guide for OceanBase Database.'),
('How to use Database', 'This is a using tutorial about Databases.');
select * from fts_basic_dml_articles order by title;
+----------------------+------------------------------------------------------------+
| title                | content                                                    |
+----------------------+------------------------------------------------------------+
| Fulltext Index       | Fulltext index can be very useful.                         |
| How to use Database  | This is a using tutorial about Databases.                  |
| OceanBase Test Case  | Writing test cases helps ensure quality.                   |
| OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
| Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
+----------------------+------------------------------------------------------------+
+----------------------+------------------+
| title                | doc_id           |
+----------------------+------------------+
| Fulltext Index       | 0200000000000000 |
| How to use Database  | 0500000000000000 |
| OceanBase Test Case  | 0300000000000000 |
| OceanBase Tutorial   | 0100000000000000 |
| Optimizing OceanBase | 0400000000000000 |
+----------------------+------------------+
+------------------+----------------------+
| doc_id           | title                |
+------------------+----------------------+
| 0100000000000000 | OceanBase Tutorial   |
| 0200000000000000 | Fulltext Index       |
| 0300000000000000 | OceanBase Test Case  |
| 0400000000000000 | Optimizing OceanBase |
| 0500000000000000 | How to use Database  |
+------------------+----------------------+
+--------------+------------------+------------+------------+
| word         | doc_id           | word_count | doc_length |
+--------------+------------------+------------+------------+
| can          | 0200000000000000 |          1 |          7 |
| case         | 0300000000000000 |          1 |          9 |
| cases        | 0300000000000000 |          1 |          9 |
| database     | 0400000000000000 |          1 |          7 |
| database     | 0500000000000000 |          1 |          5 |
| databases    | 0500000000000000 |          1 |          5 |
| ensure       | 0300000000000000 |          1 |          9 |
| fulltext     | 0100000000000000 |          1 |          5 |
| fulltext     | 0200000000000000 |          2 |          7 |
| guide        | 0400000000000000 |          1 |          7 |
| helps        | 0300000000000000 |          1 |          9 |
| index        | 0200000000000000 |          2 |          7 |
| oceanbase    | 0100000000000000 |          2 |          5 |
| oceanbase    | 0300000000000000 |          1 |          9 |
| oceanbase    | 0400000000000000 |          2 |          7 |
| optimization | 0400000000000000 |          1 |          7 |
| optimizing   | 0400000000000000 |          1 |          7 |
| quality      | 0300000000000000 |          1 |          9 |
| query        | 0400000000000000 |          1 |          7 |
| test         | 0300000000000000 |          2 |          9 |
| tutorial     | 0100000000000000 |          2 |          5 |
| tutorial     | 0500000000000000 |          1 |          5 |
| use          | 0500000000000000 |          1 |          5 |
| useful       | 0200000000000000 |          1 |          7 |
| using        | 0500000000000000 |          1 |          5 |
| very         | 0200000000000000 |          1 |          7 |
| writing      | 0300000000000000 |          1 |          9 |
+--------------+------------------+------------+------------+
+------------------+--------------+------------+------------+
| doc_id           | word         | word_count | doc_lenght |
+------------------+--------------+------------+------------+
| 0100000000000000 | fulltext     |          1 |          5 |
| 0100000000000000 | oceanbase    |          2 |          5 |
| 0100000000000000 | tutorial     |          2 |          5 |
| 0200000000000000 | can          |          1 |          7 |
| 0200000000000000 | fulltext     |          2 |          7 |
| 0200000000000000 | index        |          2 |          7 |
| 0200000000000000 | useful       |          1 |          7 |
| 0200000000000000 | very         |          1 |          7 |
| 0300000000000000 | case         |          1 |          9 |
| 0300000000000000 | cases        |          1 |          9 |
| 0300000000000000 | ensure       |          1 |          9 |
| 0300000000000000 | helps        |          1 |          9 |
| 0300000000000000 | oceanbase    |          1 |          9 |
| 0300000000000000 | quality      |          1 |          9 |
| 0300000000000000 | test         |          2 |          9 |
| 0300000000000000 | writing      |          1 |          9 |
| 0400000000000000 | database     |          1 |          7 |
| 0400000000000000 | guide        |          1 |          7 |
| 0400000000000000 | oceanbase    |          2 |          7 |
| 0400000000000000 | optimization |          1 |          7 |
| 0400000000000000 | optimizing   |          1 |          7 |
| 0400000000000000 | query        |          1 |          7 |
| 0500000000000000 | database     |          1 |          5 |
| 0500000000000000 | databases    |          1 |          5 |
| 0500000000000000 | tutorial     |          1 |          5 |
| 0500000000000000 | use          |          1 |          5 |
| 0500000000000000 | using        |          1 |          5 |
+------------------+--------------+------------+------------+
========================= update ==========================
UPDATE fts_basic_dml_articles SET title = 'Fulltext Indexing' WHERE title = 'Fulltext Index';
select * from fts_basic_dml_articles order by title;
+----------------------+------------------------------------------------------------+
| title                | content                                                    |
+----------------------+------------------------------------------------------------+
| Fulltext Indexing    | Fulltext index can be very useful.                         |
| How to use Database  | This is a using tutorial about Databases.                  |
| OceanBase Test Case  | Writing test cases helps ensure quality.                   |
| OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
| Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
+----------------------+------------------------------------------------------------+
+----------------------+------------------+
| title                | doc_id           |
+----------------------+------------------+
| Fulltext Indexing    | 0200000000000000 |
| How to use Database  | 0500000000000000 |
| OceanBase Test Case  | 0300000000000000 |
| OceanBase Tutorial   | 0100000000000000 |
| Optimizing OceanBase | 0400000000000000 |
+----------------------+------------------+
+------------------+----------------------+
| doc_id           | title                |
+------------------+----------------------+
| 0100000000000000 | OceanBase Tutorial   |
| 0200000000000000 | Fulltext Indexing    |
| 0300000000000000 | OceanBase Test Case  |
| 0400000000000000 | Optimizing OceanBase |
| 0500000000000000 | How to use Database  |
+------------------+----------------------+
+--------------+------------------+------------+------------+
| word         | doc_id           | word_count | doc_length |
+--------------+------------------+------------+------------+
| can          | 0200000000000000 |          1 |          7 |
| case         | 0300000000000000 |          1 |          9 |
| cases        | 0300000000000000 |          1 |          9 |
| database     | 0400000000000000 |          1 |          7 |
| database     | 0500000000000000 |          1 |          5 |
| databases    | 0500000000000000 |          1 |          5 |
| ensure       | 0300000000000000 |          1 |          9 |
| fulltext     | 0100000000000000 |          1 |          5 |
| fulltext     | 0200000000000000 |          2 |          7 |
| guide        | 0400000000000000 |          1 |          7 |
| helps        | 0300000000000000 |          1 |          9 |
| index        | 0200000000000000 |          1 |          7 |
| indexing     | 0200000000000000 |          1 |          7 |
| oceanbase    | 0100000000000000 |          2 |          5 |
| oceanbase    | 0300000000000000 |          1 |          9 |
| oceanbase    | 0400000000000000 |          2 |          7 |
| optimization | 0400000000000000 |          1 |          7 |
| optimizing   | 0400000000000000 |          1 |          7 |
| quality      | 0300000000000000 |          1 |          9 |
| query        | 0400000000000000 |          1 |          7 |
| test         | 0300000000000000 |          2 |          9 |
| tutorial     | 0100000000000000 |          2 |          5 |
| tutorial     | 0500000000000000 |          1 |          5 |
| use          | 0500000000000000 |          1 |          5 |
| useful       | 0200000000000000 |          1 |          7 |
| using        | 0500000000000000 |          1 |          5 |
| very         | 0200000000000000 |          1 |          7 |
| writing      | 0300000000000000 |          1 |          9 |
+--------------+------------------+------------+------------+
+------------------+--------------+------------+------------+
| doc_id           | word         | word_count | doc_lenght |
+------------------+--------------+------------+------------+
| 0100000000000000 | fulltext     |          1 |          5 |
| 0100000000000000 | oceanbase    |          2 |          5 |
| 0100000000000000 | tutorial     |          2 |          5 |
| 0200000000000000 | can          |          1 |          7 |
| 0200000000000000 | fulltext     |          2 |          7 |
| 0200000000000000 | index        |          1 |          7 |
| 0200000000000000 | indexing     |          1 |          7 |
| 0200000000000000 | useful       |          1 |          7 |
| 0200000000000000 | very         |          1 |          7 |
| 0300000000000000 | case         |          1 |          9 |
| 0300000000000000 | cases        |          1 |          9 |
| 0300000000000000 | ensure       |          1 |          9 |
| 0300000000000000 | helps        |          1 |          9 |
| 0300000000000000 | oceanbase    |          1 |          9 |
| 0300000000000000 | quality      |          1 |          9 |
| 0300000000000000 | test         |          2 |          9 |
| 0300000000000000 | writing      |          1 |          9 |
| 0400000000000000 | database     |          1 |          7 |
| 0400000000000000 | guide        |          1 |          7 |
| 0400000000000000 | oceanbase    |          2 |          7 |
| 0400000000000000 | optimization |          1 |          7 |
| 0400000000000000 | optimizing   |          1 |          7 |
| 0400000000000000 | query        |          1 |          7 |
| 0500000000000000 | database     |          1 |          5 |
| 0500000000000000 | databases    |          1 |          5 |
| 0500000000000000 | tutorial     |          1 |          5 |
| 0500000000000000 | use          |          1 |          5 |
| 0500000000000000 | using        |          1 |          5 |
+------------------+--------------+------------+------------+
========================= delete ==========================
DELETE FROM fts_basic_dml_articles WHERE title = 'Optimizing OceanBase';
select * from fts_basic_dml_articles order by title;
+---------------------+----------------------------------------------+
| title               | content                                      |
+---------------------+----------------------------------------------+
| Fulltext Indexing   | Fulltext index can be very useful.           |
| How to use Database | This is a using tutorial about Databases.    |
| OceanBase Test Case | Writing test cases helps ensure quality.     |
| OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
+---------------------+----------------------------------------------+
+---------------------+------------------+
| title               | doc_id           |
+---------------------+------------------+
| Fulltext Indexing   | 0200000000000000 |
| How to use Database | 0500000000000000 |
| OceanBase Test Case | 0300000000000000 |
| OceanBase Tutorial  | 0100000000000000 |
+---------------------+------------------+
+------------------+---------------------+
| doc_id           | title               |
+------------------+---------------------+
| 0100000000000000 | OceanBase Tutorial  |
| 0200000000000000 | Fulltext Indexing   |
| 0300000000000000 | OceanBase Test Case |
| 0500000000000000 | How to use Database |
+------------------+---------------------+
+-----------+------------------+------------+------------+
| word      | doc_id           | word_count | doc_length |
+-----------+------------------+------------+------------+
| can       | 0200000000000000 |          1 |          7 |
| case      | 0300000000000000 |          1 |          9 |
| cases     | 0300000000000000 |          1 |          9 |
| database  | 0500000000000000 |          1 |          5 |
| databases | 0500000000000000 |          1 |          5 |
| ensure    | 0300000000000000 |          1 |          9 |
| fulltext  | 0100000000000000 |          1 |          5 |
| fulltext  | 0200000000000000 |          2 |          7 |
| helps     | 0300000000000000 |          1 |          9 |
| index     | 0200000000000000 |          1 |          7 |
| indexing  | 0200000000000000 |          1 |          7 |
| oceanbase | 0100000000000000 |          2 |          5 |
| oceanbase | 0300000000000000 |          1 |          9 |
| quality   | 0300000000000000 |          1 |          9 |
| test      | 0300000000000000 |          2 |          9 |
| tutorial  | 0100000000000000 |          2 |          5 |
| tutorial  | 0500000000000000 |          1 |          5 |
| use       | 0500000000000000 |          1 |          5 |
| useful    | 0200000000000000 |          1 |          7 |
| using     | 0500000000000000 |          1 |          5 |
| very      | 0200000000000000 |          1 |          7 |
| writing   | 0300000000000000 |          1 |          9 |
+-----------+------------------+------------+------------+
+------------------+-----------+------------+------------+
| doc_id           | word      | word_count | doc_lenght |
+------------------+-----------+------------+------------+
| 0100000000000000 | fulltext  |          1 |          5 |
| 0100000000000000 | oceanbase |          2 |          5 |
| 0100000000000000 | tutorial  |          2 |          5 |
| 0200000000000000 | can       |          1 |          7 |
| 0200000000000000 | fulltext  |          2 |          7 |
| 0200000000000000 | index     |          1 |          7 |
| 0200000000000000 | indexing  |          1 |          7 |
| 0200000000000000 | useful    |          1 |          7 |
| 0200000000000000 | very      |          1 |          7 |
| 0300000000000000 | case      |          1 |          9 |
| 0300000000000000 | cases     |          1 |          9 |
| 0300000000000000 | ensure    |          1 |          9 |
| 0300000000000000 | helps     |          1 |          9 |
| 0300000000000000 | oceanbase |          1 |          9 |
| 0300000000000000 | quality   |          1 |          9 |
| 0300000000000000 | test      |          2 |          9 |
| 0300000000000000 | writing   |          1 |          9 |
| 0500000000000000 | database  |          1 |          5 |
| 0500000000000000 | databases |          1 |          5 |
| 0500000000000000 | tutorial  |          1 |          5 |
| 0500000000000000 | use       |          1 |          5 |
| 0500000000000000 | using     |          1 |          5 |
+------------------+-----------+------------+------------+
========================== drop ===========================
DROP TABLE fts_basic_dml_articles;
######## Create Table With Auto Increment Column #########
======================== create ==========================
CREATE TABLE fts_basic_dml_articles (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    content TEXT,
    FULLTEXT INDEX ctx1(title),
    FULLTEXT INDEX ctx2(content) WITH PARSER ngram,
    FULLTEXT INDEX ctx3(title, content) WITH PARSER beng
);
set _show_ddl_in_compat_mode=1;
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(200) DEFAULT NULL,
  `content` text DEFAULT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `ctx1` (`title`),
  FULLTEXT KEY `ctx2` (`content`) WITH PARSER ngram,
  FULLTEXT KEY `ctx3` (`title`, `content`)
) AUTO_INCREMENT = 1 DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC
set _show_ddl_in_compat_mode=0;
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(200) DEFAULT NULL,
  `content` text DEFAULT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `ctx1` (`title`) WITH PARSER space PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384,
  FULLTEXT KEY `ctx2` (`content`) WITH PARSER ngram PARSER_PROPERTIES=(ngram_token_size=2) BLOCK_SIZE 16384,
  FULLTEXT KEY `ctx3` (`title`, `content`) WITH PARSER beng PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384
) ORGANIZATION INDEX AUTO_INCREMENT = 1 AUTO_INCREMENT_MODE = 'ORDER' DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = replica_num BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE ENABLE_MACRO_BLOCK_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0
SHOW INDEX FROM fts_basic_dml_articles;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment	Visible	Expression
fts_basic_dml_articles	0	PRIMARY	1	id	A	NULL	NULL	NULL		BTREE	available		YES	NULL
fts_basic_dml_articles	1	ctx1	1	title	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx2	1	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx3	1	title	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx3	2	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
======================== insert ==========================
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('OceanBase Tutorial', 'This is a tutorial about Oceanbase Fulltext.'),
('Fulltext Index', 'Fulltext index can be very useful.'),
('OceanBase Test Case', 'Writing test cases helps ensure quality.');
select * from fts_basic_dml_articles order by id;
+----+---------------------+----------------------------------------------+
| id | title               | content                                      |
+----+---------------------+----------------------------------------------+
|  1 | OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
|  2 | Fulltext Index      | Fulltext index can be very useful.           |
|  3 | OceanBase Test Case | Writing test cases helps ensure quality.     |
+----+---------------------+----------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  1 | 0100000000000000 |
|  2 | 0200000000000000 |
|  3 | 0300000000000000 |
+----+------------------+
+-----------+------------------+------------+------------+
| word      | doc_id           | word_count | doc_length |
+-----------+------------------+------------+------------+
| case      | 0300000000000000 |          1 |          3 |
| fulltext  | 0200000000000000 |          1 |          2 |
| index     | 0200000000000000 |          1 |          2 |
| oceanbase | 0100000000000000 |          1 |          2 |
| oceanbase | 0300000000000000 |          1 |          3 |
| test      | 0300000000000000 |          1 |          3 |
| tutorial  | 0100000000000000 |          1 |          2 |
+-----------+------------------+------------+------------+
+------+------------------+------------+------------+
| word | doc_id           | word_count | doc_length |
+------+------------------+------------+------------+
| ab   | 0100000000000000 |          1 |         30 |
| al   | 0100000000000000 |          1 |         30 |
| al   | 0300000000000000 |          1 |         28 |
| an   | 0100000000000000 |          1 |         30 |
| an   | 0200000000000000 |          1 |         22 |
| as   | 0100000000000000 |          1 |         30 |
| as   | 0300000000000000 |          1 |         28 |
| ba   | 0100000000000000 |          1 |         30 |
| be   | 0200000000000000 |          1 |         22 |
| bo   | 0100000000000000 |          1 |         30 |
| ca   | 0200000000000000 |          1 |         22 |
| ca   | 0300000000000000 |          1 |         28 |
| ce   | 0100000000000000 |          1 |         30 |
| de   | 0200000000000000 |          1 |         22 |
| ea   | 0100000000000000 |          1 |         30 |
| ef   | 0200000000000000 |          1 |         22 |
| el   | 0300000000000000 |          1 |         28 |
| en   | 0300000000000000 |          1 |         28 |
| er   | 0200000000000000 |          1 |         22 |
| es   | 0300000000000000 |          2 |         28 |
| ex   | 0100000000000000 |          1 |         30 |
| ex   | 0200000000000000 |          2 |         22 |
| fu   | 0100000000000000 |          1 |         30 |
| fu   | 0200000000000000 |          2 |         22 |
| he   | 0300000000000000 |          1 |         28 |
| hi   | 0100000000000000 |          1 |         30 |
| ia   | 0100000000000000 |          1 |         30 |
| in   | 0200000000000000 |          1 |         22 |
| in   | 0300000000000000 |          1 |         28 |
| is   | 0100000000000000 |          2 |         30 |
| it   | 0300000000000000 |          2 |         28 |
| li   | 0300000000000000 |          1 |         28 |
| ll   | 0100000000000000 |          1 |         30 |
| ll   | 0200000000000000 |          1 |         22 |
| lp   | 0300000000000000 |          1 |         28 |
| lt   | 0100000000000000 |          1 |         30 |
| lt   | 0200000000000000 |          1 |         22 |
| nb   | 0100000000000000 |          1 |         30 |
| nd   | 0200000000000000 |          1 |         22 |
| ng   | 0300000000000000 |          1 |         28 |
| ns   | 0300000000000000 |          1 |         28 |
| oc   | 0100000000000000 |          1 |         30 |
| or   | 0100000000000000 |          1 |         30 |
| ou   | 0100000000000000 |          1 |         30 |
| ps   | 0300000000000000 |          1 |         28 |
| qu   | 0300000000000000 |          1 |         28 |
| re   | 0300000000000000 |          1 |         28 |
| ri   | 0100000000000000 |          1 |         30 |
| ri   | 0300000000000000 |          1 |         28 |
| ry   | 0200000000000000 |          1 |         22 |
| se   | 0100000000000000 |          1 |         30 |
| se   | 0200000000000000 |          1 |         22 |
| se   | 0300000000000000 |          1 |         28 |
| st   | 0300000000000000 |          1 |         28 |
| su   | 0300000000000000 |          1 |         28 |
| te   | 0100000000000000 |          1 |         30 |
| te   | 0200000000000000 |          1 |         22 |
| te   | 0300000000000000 |          1 |         28 |
| th   | 0100000000000000 |          1 |         30 |
| ti   | 0300000000000000 |          1 |         28 |
| to   | 0100000000000000 |          1 |         30 |
| tu   | 0100000000000000 |          1 |         30 |
| ty   | 0300000000000000 |          1 |         28 |
| ua   | 0300000000000000 |          1 |         28 |
| ul   | 0100000000000000 |          1 |         30 |
| ul   | 0200000000000000 |          2 |         22 |
| ur   | 0300000000000000 |          1 |         28 |
| us   | 0200000000000000 |          1 |         22 |
| ut   | 0100000000000000 |          2 |         30 |
| ve   | 0200000000000000 |          1 |         22 |
| wr   | 0300000000000000 |          1 |         28 |
| xt   | 0100000000000000 |          1 |         30 |
| xt   | 0200000000000000 |          1 |         22 |
+------+------------------+------------+------------+
+-----------+------------------+------------+------------+
| word      | doc_id           | word_count | doc_length |
+-----------+------------------+------------+------------+
| can       | 0200000000000000 |          1 |          7 |
| case      | 0300000000000000 |          1 |          9 |
| cases     | 0300000000000000 |          1 |          9 |
| ensure    | 0300000000000000 |          1 |          9 |
| fulltext  | 0100000000000000 |          1 |          5 |
| fulltext  | 0200000000000000 |          2 |          7 |
| helps     | 0300000000000000 |          1 |          9 |
| index     | 0200000000000000 |          2 |          7 |
| oceanbase | 0100000000000000 |          2 |          5 |
| oceanbase | 0300000000000000 |          1 |          9 |
| quality   | 0300000000000000 |          1 |          9 |
| test      | 0300000000000000 |          2 |          9 |
| tutorial  | 0100000000000000 |          2 |          5 |
| useful    | 0200000000000000 |          1 |          7 |
| very      | 0200000000000000 |          1 |          7 |
| writing   | 0300000000000000 |          1 |          9 |
+-----------+------------------+------------+------------+
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('Optimizing OceanBase', 'This is a query optimization guide for OceanBase Database.'),
('How to use Database', 'This is a using tutorial about Databases.');
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  1 | OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
|  2 | Fulltext Index       | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  1 | 0100000000000000 |
|  2 | 0200000000000000 |
|  3 | 0300000000000000 |
|  4 | 0400000000000000 |
|  5 | 0500000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0100000000000000 |  1 |
| 0200000000000000 |  2 |
| 0300000000000000 |  3 |
| 0400000000000000 |  4 |
| 0500000000000000 |  5 |
+------------------+----+
+------------+------------------+------------+------------+
| word       | doc_id           | word_count | doc_length |
+------------+------------------+------------+------------+
| case       | 0300000000000000 |          1 |          3 |
| database   | 0500000000000000 |          1 |          2 |
| fulltext   | 0200000000000000 |          1 |          2 |
| index      | 0200000000000000 |          1 |          2 |
| oceanbase  | 0100000000000000 |          1 |          2 |
| oceanbase  | 0300000000000000 |          1 |          3 |
| oceanbase  | 0400000000000000 |          1 |          2 |
| optimizing | 0400000000000000 |          1 |          2 |
| test       | 0300000000000000 |          1 |          3 |
| tutorial   | 0100000000000000 |          1 |          2 |
| use        | 0500000000000000 |          1 |          2 |
+------------+------------------+------------+------------+
+------+------------------+------------+------------+
| word | doc_id           | word_count | doc_length |
+------+------------------+------------+------------+
| ab   | 0100000000000000 |          1 |         30 |
| ab   | 0400000000000000 |          1 |         40 |
| ab   | 0500000000000000 |          2 |         27 |
| al   | 0100000000000000 |          1 |         30 |
| al   | 0300000000000000 |          1 |         28 |
| al   | 0500000000000000 |          1 |         27 |
| an   | 0100000000000000 |          1 |         30 |
| an   | 0200000000000000 |          1 |         22 |
| an   | 0400000000000000 |          1 |         40 |
| as   | 0100000000000000 |          1 |         30 |
| as   | 0300000000000000 |          1 |         28 |
| as   | 0400000000000000 |          2 |         40 |
| as   | 0500000000000000 |          1 |         27 |
| at   | 0400000000000000 |          2 |         40 |
| at   | 0500000000000000 |          1 |         27 |
| ba   | 0100000000000000 |          1 |         30 |
| ba   | 0400000000000000 |          2 |         40 |
| ba   | 0500000000000000 |          1 |         27 |
| be   | 0200000000000000 |          1 |         22 |
| bo   | 0100000000000000 |          1 |         30 |
| bo   | 0500000000000000 |          1 |         27 |
| ca   | 0200000000000000 |          1 |         22 |
| ca   | 0300000000000000 |          1 |         28 |
| ce   | 0100000000000000 |          1 |         30 |
| ce   | 0400000000000000 |          1 |         40 |
| da   | 0400000000000000 |          1 |         40 |
| da   | 0500000000000000 |          1 |         27 |
| de   | 0200000000000000 |          1 |         22 |
| de   | 0400000000000000 |          1 |         40 |
| ea   | 0100000000000000 |          1 |         30 |
| ea   | 0400000000000000 |          1 |         40 |
| ef   | 0200000000000000 |          1 |         22 |
| el   | 0300000000000000 |          1 |         28 |
| en   | 0300000000000000 |          1 |         28 |
| er   | 0200000000000000 |          1 |         22 |
| er   | 0400000000000000 |          1 |         40 |
| es   | 0300000000000000 |          2 |         28 |
| es   | 0500000000000000 |          1 |         27 |
| ex   | 0100000000000000 |          1 |         30 |
| ex   | 0200000000000000 |          2 |         22 |
| fo   | 0400000000000000 |          1 |         40 |
| fu   | 0100000000000000 |          1 |         30 |
| fu   | 0200000000000000 |          2 |         22 |
| gu   | 0400000000000000 |          1 |         40 |
| he   | 0300000000000000 |          1 |         28 |
| hi   | 0100000000000000 |          1 |         30 |
| hi   | 0400000000000000 |          1 |         40 |
| hi   | 0500000000000000 |          1 |         27 |
| ia   | 0100000000000000 |          1 |         30 |
| ia   | 0500000000000000 |          1 |         27 |
| id   | 0400000000000000 |          1 |         40 |
| im   | 0400000000000000 |          1 |         40 |
| in   | 0200000000000000 |          1 |         22 |
| in   | 0300000000000000 |          1 |         28 |
| in   | 0500000000000000 |          1 |         27 |
| io   | 0400000000000000 |          1 |         40 |
| is   | 0100000000000000 |          2 |         30 |
| is   | 0400000000000000 |          2 |         40 |
| is   | 0500000000000000 |          2 |         27 |
| it   | 0300000000000000 |          2 |         28 |
| iz   | 0400000000000000 |          1 |         40 |
| li   | 0300000000000000 |          1 |         28 |
| ll   | 0100000000000000 |          1 |         30 |
| ll   | 0200000000000000 |          1 |         22 |
| lp   | 0300000000000000 |          1 |         28 |
| lt   | 0100000000000000 |          1 |         30 |
| lt   | 0200000000000000 |          1 |         22 |
| mi   | 0400000000000000 |          1 |         40 |
| nb   | 0100000000000000 |          1 |         30 |
| nb   | 0400000000000000 |          1 |         40 |
| nd   | 0200000000000000 |          1 |         22 |
| ng   | 0300000000000000 |          1 |         28 |
| ng   | 0500000000000000 |          1 |         27 |
| ns   | 0300000000000000 |          1 |         28 |
| oc   | 0100000000000000 |          1 |         30 |
| oc   | 0400000000000000 |          1 |         40 |
| on   | 0400000000000000 |          1 |         40 |
| op   | 0400000000000000 |          1 |         40 |
| or   | 0100000000000000 |          1 |         30 |
| or   | 0400000000000000 |          1 |         40 |
| or   | 0500000000000000 |          1 |         27 |
| ou   | 0100000000000000 |          1 |         30 |
| ou   | 0500000000000000 |          1 |         27 |
| ps   | 0300000000000000 |          1 |         28 |
| pt   | 0400000000000000 |          1 |         40 |
| qu   | 0300000000000000 |          1 |         28 |
| qu   | 0400000000000000 |          1 |         40 |
| re   | 0300000000000000 |          1 |         28 |
| ri   | 0100000000000000 |          1 |         30 |
| ri   | 0300000000000000 |          1 |         28 |
| ri   | 0500000000000000 |          1 |         27 |
| ry   | 0200000000000000 |          1 |         22 |
| ry   | 0400000000000000 |          1 |         40 |
| se   | 0100000000000000 |          1 |         30 |
| se   | 0200000000000000 |          1 |         22 |
| se   | 0300000000000000 |          1 |         28 |
| se   | 0400000000000000 |          2 |         40 |
| se   | 0500000000000000 |          1 |         27 |
| si   | 0500000000000000 |          1 |         27 |
| st   | 0300000000000000 |          1 |         28 |
| su   | 0300000000000000 |          1 |         28 |
| ta   | 0400000000000000 |          1 |         40 |
| ta   | 0500000000000000 |          1 |         27 |
| te   | 0100000000000000 |          1 |         30 |
| te   | 0200000000000000 |          1 |         22 |
| te   | 0300000000000000 |          1 |         28 |
| th   | 0100000000000000 |          1 |         30 |
| th   | 0400000000000000 |          1 |         40 |
| th   | 0500000000000000 |          1 |         27 |
| ti   | 0300000000000000 |          1 |         28 |
| ti   | 0400000000000000 |          2 |         40 |
| to   | 0100000000000000 |          1 |         30 |
| to   | 0500000000000000 |          1 |         27 |
| tu   | 0100000000000000 |          1 |         30 |
| tu   | 0500000000000000 |          1 |         27 |
| ty   | 0300000000000000 |          1 |         28 |
| ua   | 0300000000000000 |          1 |         28 |
| ue   | 0400000000000000 |          1 |         40 |
| ui   | 0400000000000000 |          1 |         40 |
| ul   | 0100000000000000 |          1 |         30 |
| ul   | 0200000000000000 |          2 |         22 |
| ur   | 0300000000000000 |          1 |         28 |
| us   | 0200000000000000 |          1 |         22 |
| us   | 0500000000000000 |          1 |         27 |
| ut   | 0100000000000000 |          2 |         30 |
| ut   | 0500000000000000 |          2 |         27 |
| ve   | 0200000000000000 |          1 |         22 |
| wr   | 0300000000000000 |          1 |         28 |
| xt   | 0100000000000000 |          1 |         30 |
| xt   | 0200000000000000 |          1 |         22 |
| za   | 0400000000000000 |          1 |         40 |
+------+------------------+------------+------------+
+--------------+------------------+------------+------------+
| word         | doc_id           | word_count | doc_length |
+--------------+------------------+------------+------------+
| can          | 0200000000000000 |          1 |          7 |
| case         | 0300000000000000 |          1 |          9 |
| cases        | 0300000000000000 |          1 |          9 |
| database     | 0400000000000000 |          1 |          7 |
| database     | 0500000000000000 |          1 |          5 |
| databases    | 0500000000000000 |          1 |          5 |
| ensure       | 0300000000000000 |          1 |          9 |
| fulltext     | 0100000000000000 |          1 |          5 |
| fulltext     | 0200000000000000 |          2 |          7 |
| guide        | 0400000000000000 |          1 |          7 |
| helps        | 0300000000000000 |          1 |          9 |
| index        | 0200000000000000 |          2 |          7 |
| oceanbase    | 0100000000000000 |          2 |          5 |
| oceanbase    | 0300000000000000 |          1 |          9 |
| oceanbase    | 0400000000000000 |          2 |          7 |
| optimization | 0400000000000000 |          1 |          7 |
| optimizing   | 0400000000000000 |          1 |          7 |
| quality      | 0300000000000000 |          1 |          9 |
| query        | 0400000000000000 |          1 |          7 |
| test         | 0300000000000000 |          2 |          9 |
| tutorial     | 0100000000000000 |          2 |          5 |
| tutorial     | 0500000000000000 |          1 |          5 |
| use          | 0500000000000000 |          1 |          5 |
| useful       | 0200000000000000 |          1 |          7 |
| using        | 0500000000000000 |          1 |          5 |
| very         | 0200000000000000 |          1 |          7 |
| writing      | 0300000000000000 |          1 |          9 |
+--------------+------------------+------------+------------+
========================= update ==========================
UPDATE fts_basic_dml_articles SET title = 'Fulltext Indexing' WHERE id = 2;
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  1 | OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
|  2 | Fulltext Indexing    | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  1 | 0100000000000000 |
|  2 | 0200000000000000 |
|  3 | 0300000000000000 |
|  4 | 0400000000000000 |
|  5 | 0500000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0100000000000000 |  1 |
| 0200000000000000 |  2 |
| 0300000000000000 |  3 |
| 0400000000000000 |  4 |
| 0500000000000000 |  5 |
+------------------+----+
+------------+------------------+------------+------------+
| word       | doc_id           | word_count | doc_length |
+------------+------------------+------------+------------+
| case       | 0300000000000000 |          1 |          3 |
| database   | 0500000000000000 |          1 |          2 |
| fulltext   | 0200000000000000 |          1 |          2 |
| indexing   | 0200000000000000 |          1 |          2 |
| oceanbase  | 0100000000000000 |          1 |          2 |
| oceanbase  | 0300000000000000 |          1 |          3 |
| oceanbase  | 0400000000000000 |          1 |          2 |
| optimizing | 0400000000000000 |          1 |          2 |
| test       | 0300000000000000 |          1 |          3 |
| tutorial   | 0100000000000000 |          1 |          2 |
| use        | 0500000000000000 |          1 |          2 |
+------------+------------------+------------+------------+
+------+------------------+------------+------------+
| word | doc_id           | word_count | doc_length |
+------+------------------+------------+------------+
| ab   | 0100000000000000 |          1 |         30 |
| ab   | 0400000000000000 |          1 |         40 |
| ab   | 0500000000000000 |          2 |         27 |
| al   | 0100000000000000 |          1 |         30 |
| al   | 0300000000000000 |          1 |         28 |
| al   | 0500000000000000 |          1 |         27 |
| an   | 0100000000000000 |          1 |         30 |
| an   | 0200000000000000 |          1 |         22 |
| an   | 0400000000000000 |          1 |         40 |
| as   | 0100000000000000 |          1 |         30 |
| as   | 0300000000000000 |          1 |         28 |
| as   | 0400000000000000 |          2 |         40 |
| as   | 0500000000000000 |          1 |         27 |
| at   | 0400000000000000 |          2 |         40 |
| at   | 0500000000000000 |          1 |         27 |
| ba   | 0100000000000000 |          1 |         30 |
| ba   | 0400000000000000 |          2 |         40 |
| ba   | 0500000000000000 |          1 |         27 |
| be   | 0200000000000000 |          1 |         22 |
| bo   | 0100000000000000 |          1 |         30 |
| bo   | 0500000000000000 |          1 |         27 |
| ca   | 0200000000000000 |          1 |         22 |
| ca   | 0300000000000000 |          1 |         28 |
| ce   | 0100000000000000 |          1 |         30 |
| ce   | 0400000000000000 |          1 |         40 |
| da   | 0400000000000000 |          1 |         40 |
| da   | 0500000000000000 |          1 |         27 |
| de   | 0200000000000000 |          1 |         22 |
| de   | 0400000000000000 |          1 |         40 |
| ea   | 0100000000000000 |          1 |         30 |
| ea   | 0400000000000000 |          1 |         40 |
| ef   | 0200000000000000 |          1 |         22 |
| el   | 0300000000000000 |          1 |         28 |
| en   | 0300000000000000 |          1 |         28 |
| er   | 0200000000000000 |          1 |         22 |
| er   | 0400000000000000 |          1 |         40 |
| es   | 0300000000000000 |          2 |         28 |
| es   | 0500000000000000 |          1 |         27 |
| ex   | 0100000000000000 |          1 |         30 |
| ex   | 0200000000000000 |          2 |         22 |
| fo   | 0400000000000000 |          1 |         40 |
| fu   | 0100000000000000 |          1 |         30 |
| fu   | 0200000000000000 |          2 |         22 |
| gu   | 0400000000000000 |          1 |         40 |
| he   | 0300000000000000 |          1 |         28 |
| hi   | 0100000000000000 |          1 |         30 |
| hi   | 0400000000000000 |          1 |         40 |
| hi   | 0500000000000000 |          1 |         27 |
| ia   | 0100000000000000 |          1 |         30 |
| ia   | 0500000000000000 |          1 |         27 |
| id   | 0400000000000000 |          1 |         40 |
| im   | 0400000000000000 |          1 |         40 |
| in   | 0200000000000000 |          1 |         22 |
| in   | 0300000000000000 |          1 |         28 |
| in   | 0500000000000000 |          1 |         27 |
| io   | 0400000000000000 |          1 |         40 |
| is   | 0100000000000000 |          2 |         30 |
| is   | 0400000000000000 |          2 |         40 |
| is   | 0500000000000000 |          2 |         27 |
| it   | 0300000000000000 |          2 |         28 |
| iz   | 0400000000000000 |          1 |         40 |
| li   | 0300000000000000 |          1 |         28 |
| ll   | 0100000000000000 |          1 |         30 |
| ll   | 0200000000000000 |          1 |         22 |
| lp   | 0300000000000000 |          1 |         28 |
| lt   | 0100000000000000 |          1 |         30 |
| lt   | 0200000000000000 |          1 |         22 |
| mi   | 0400000000000000 |          1 |         40 |
| nb   | 0100000000000000 |          1 |         30 |
| nb   | 0400000000000000 |          1 |         40 |
| nd   | 0200000000000000 |          1 |         22 |
| ng   | 0300000000000000 |          1 |         28 |
| ng   | 0500000000000000 |          1 |         27 |
| ns   | 0300000000000000 |          1 |         28 |
| oc   | 0100000000000000 |          1 |         30 |
| oc   | 0400000000000000 |          1 |         40 |
| on   | 0400000000000000 |          1 |         40 |
| op   | 0400000000000000 |          1 |         40 |
| or   | 0100000000000000 |          1 |         30 |
| or   | 0400000000000000 |          1 |         40 |
| or   | 0500000000000000 |          1 |         27 |
| ou   | 0100000000000000 |          1 |         30 |
| ou   | 0500000000000000 |          1 |         27 |
| ps   | 0300000000000000 |          1 |         28 |
| pt   | 0400000000000000 |          1 |         40 |
| qu   | 0300000000000000 |          1 |         28 |
| qu   | 0400000000000000 |          1 |         40 |
| re   | 0300000000000000 |          1 |         28 |
| ri   | 0100000000000000 |          1 |         30 |
| ri   | 0300000000000000 |          1 |         28 |
| ri   | 0500000000000000 |          1 |         27 |
| ry   | 0200000000000000 |          1 |         22 |
| ry   | 0400000000000000 |          1 |         40 |
| se   | 0100000000000000 |          1 |         30 |
| se   | 0200000000000000 |          1 |         22 |
| se   | 0300000000000000 |          1 |         28 |
| se   | 0400000000000000 |          2 |         40 |
| se   | 0500000000000000 |          1 |         27 |
| si   | 0500000000000000 |          1 |         27 |
| st   | 0300000000000000 |          1 |         28 |
| su   | 0300000000000000 |          1 |         28 |
| ta   | 0400000000000000 |          1 |         40 |
| ta   | 0500000000000000 |          1 |         27 |
| te   | 0100000000000000 |          1 |         30 |
| te   | 0200000000000000 |          1 |         22 |
| te   | 0300000000000000 |          1 |         28 |
| th   | 0100000000000000 |          1 |         30 |
| th   | 0400000000000000 |          1 |         40 |
| th   | 0500000000000000 |          1 |         27 |
| ti   | 0300000000000000 |          1 |         28 |
| ti   | 0400000000000000 |          2 |         40 |
| to   | 0100000000000000 |          1 |         30 |
| to   | 0500000000000000 |          1 |         27 |
| tu   | 0100000000000000 |          1 |         30 |
| tu   | 0500000000000000 |          1 |         27 |
| ty   | 0300000000000000 |          1 |         28 |
| ua   | 0300000000000000 |          1 |         28 |
| ue   | 0400000000000000 |          1 |         40 |
| ui   | 0400000000000000 |          1 |         40 |
| ul   | 0100000000000000 |          1 |         30 |
| ul   | 0200000000000000 |          2 |         22 |
| ur   | 0300000000000000 |          1 |         28 |
| us   | 0200000000000000 |          1 |         22 |
| us   | 0500000000000000 |          1 |         27 |
| ut   | 0100000000000000 |          2 |         30 |
| ut   | 0500000000000000 |          2 |         27 |
| ve   | 0200000000000000 |          1 |         22 |
| wr   | 0300000000000000 |          1 |         28 |
| xt   | 0100000000000000 |          1 |         30 |
| xt   | 0200000000000000 |          1 |         22 |
| za   | 0400000000000000 |          1 |         40 |
+------+------------------+------------+------------+
+--------------+------------------+------------+------------+
| word         | doc_id           | word_count | doc_length |
+--------------+------------------+------------+------------+
| can          | 0200000000000000 |          1 |          7 |
| case         | 0300000000000000 |          1 |          9 |
| cases        | 0300000000000000 |          1 |          9 |
| database     | 0400000000000000 |          1 |          7 |
| database     | 0500000000000000 |          1 |          5 |
| databases    | 0500000000000000 |          1 |          5 |
| ensure       | 0300000000000000 |          1 |          9 |
| fulltext     | 0100000000000000 |          1 |          5 |
| fulltext     | 0200000000000000 |          2 |          7 |
| guide        | 0400000000000000 |          1 |          7 |
| helps        | 0300000000000000 |          1 |          9 |
| index        | 0200000000000000 |          1 |          7 |
| indexing     | 0200000000000000 |          1 |          7 |
| oceanbase    | 0100000000000000 |          2 |          5 |
| oceanbase    | 0300000000000000 |          1 |          9 |
| oceanbase    | 0400000000000000 |          2 |          7 |
| optimization | 0400000000000000 |          1 |          7 |
| optimizing   | 0400000000000000 |          1 |          7 |
| quality      | 0300000000000000 |          1 |          9 |
| query        | 0400000000000000 |          1 |          7 |
| test         | 0300000000000000 |          2 |          9 |
| tutorial     | 0100000000000000 |          2 |          5 |
| tutorial     | 0500000000000000 |          1 |          5 |
| use          | 0500000000000000 |          1 |          5 |
| useful       | 0200000000000000 |          1 |          7 |
| using        | 0500000000000000 |          1 |          5 |
| very         | 0200000000000000 |          1 |          7 |
| writing      | 0300000000000000 |          1 |          9 |
+--------------+------------------+------------+------------+
========================= delete ==========================
DELETE FROM fts_basic_dml_articles WHERE id = 1;
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  2 | Fulltext Indexing    | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  2 | 0200000000000000 |
|  3 | 0300000000000000 |
|  4 | 0400000000000000 |
|  5 | 0500000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0200000000000000 |  2 |
| 0300000000000000 |  3 |
| 0400000000000000 |  4 |
| 0500000000000000 |  5 |
+------------------+----+
+------------+------------------+------------+------------+
| word       | doc_id           | word_count | doc_length |
+------------+------------------+------------+------------+
| case       | 0300000000000000 |          1 |          3 |
| database   | 0500000000000000 |          1 |          2 |
| fulltext   | 0200000000000000 |          1 |          2 |
| indexing   | 0200000000000000 |          1 |          2 |
| oceanbase  | 0300000000000000 |          1 |          3 |
| oceanbase  | 0400000000000000 |          1 |          2 |
| optimizing | 0400000000000000 |          1 |          2 |
| test       | 0300000000000000 |          1 |          3 |
| use        | 0500000000000000 |          1 |          2 |
+------------+------------------+------------+------------+
+------+------------------+------------+------------+
| word | doc_id           | word_count | doc_length |
+------+------------------+------------+------------+
| ab   | 0400000000000000 |          1 |         40 |
| ab   | 0500000000000000 |          2 |         27 |
| al   | 0300000000000000 |          1 |         28 |
| al   | 0500000000000000 |          1 |         27 |
| an   | 0200000000000000 |          1 |         22 |
| an   | 0400000000000000 |          1 |         40 |
| as   | 0300000000000000 |          1 |         28 |
| as   | 0400000000000000 |          2 |         40 |
| as   | 0500000000000000 |          1 |         27 |
| at   | 0400000000000000 |          2 |         40 |
| at   | 0500000000000000 |          1 |         27 |
| ba   | 0400000000000000 |          2 |         40 |
| ba   | 0500000000000000 |          1 |         27 |
| be   | 0200000000000000 |          1 |         22 |
| bo   | 0500000000000000 |          1 |         27 |
| ca   | 0200000000000000 |          1 |         22 |
| ca   | 0300000000000000 |          1 |         28 |
| ce   | 0400000000000000 |          1 |         40 |
| da   | 0400000000000000 |          1 |         40 |
| da   | 0500000000000000 |          1 |         27 |
| de   | 0200000000000000 |          1 |         22 |
| de   | 0400000000000000 |          1 |         40 |
| ea   | 0400000000000000 |          1 |         40 |
| ef   | 0200000000000000 |          1 |         22 |
| el   | 0300000000000000 |          1 |         28 |
| en   | 0300000000000000 |          1 |         28 |
| er   | 0200000000000000 |          1 |         22 |
| er   | 0400000000000000 |          1 |         40 |
| es   | 0300000000000000 |          2 |         28 |
| es   | 0500000000000000 |          1 |         27 |
| ex   | 0200000000000000 |          2 |         22 |
| fo   | 0400000000000000 |          1 |         40 |
| fu   | 0200000000000000 |          2 |         22 |
| gu   | 0400000000000000 |          1 |         40 |
| he   | 0300000000000000 |          1 |         28 |
| hi   | 0400000000000000 |          1 |         40 |
| hi   | 0500000000000000 |          1 |         27 |
| ia   | 0500000000000000 |          1 |         27 |
| id   | 0400000000000000 |          1 |         40 |
| im   | 0400000000000000 |          1 |         40 |
| in   | 0200000000000000 |          1 |         22 |
| in   | 0300000000000000 |          1 |         28 |
| in   | 0500000000000000 |          1 |         27 |
| io   | 0400000000000000 |          1 |         40 |
| is   | 0400000000000000 |          2 |         40 |
| is   | 0500000000000000 |          2 |         27 |
| it   | 0300000000000000 |          2 |         28 |
| iz   | 0400000000000000 |          1 |         40 |
| li   | 0300000000000000 |          1 |         28 |
| ll   | 0200000000000000 |          1 |         22 |
| lp   | 0300000000000000 |          1 |         28 |
| lt   | 0200000000000000 |          1 |         22 |
| mi   | 0400000000000000 |          1 |         40 |
| nb   | 0400000000000000 |          1 |         40 |
| nd   | 0200000000000000 |          1 |         22 |
| ng   | 0300000000000000 |          1 |         28 |
| ng   | 0500000000000000 |          1 |         27 |
| ns   | 0300000000000000 |          1 |         28 |
| oc   | 0400000000000000 |          1 |         40 |
| on   | 0400000000000000 |          1 |         40 |
| op   | 0400000000000000 |          1 |         40 |
| or   | 0400000000000000 |          1 |         40 |
| or   | 0500000000000000 |          1 |         27 |
| ou   | 0500000000000000 |          1 |         27 |
| ps   | 0300000000000000 |          1 |         28 |
| pt   | 0400000000000000 |          1 |         40 |
| qu   | 0300000000000000 |          1 |         28 |
| qu   | 0400000000000000 |          1 |         40 |
| re   | 0300000000000000 |          1 |         28 |
| ri   | 0300000000000000 |          1 |         28 |
| ri   | 0500000000000000 |          1 |         27 |
| ry   | 0200000000000000 |          1 |         22 |
| ry   | 0400000000000000 |          1 |         40 |
| se   | 0200000000000000 |          1 |         22 |
| se   | 0300000000000000 |          1 |         28 |
| se   | 0400000000000000 |          2 |         40 |
| se   | 0500000000000000 |          1 |         27 |
| si   | 0500000000000000 |          1 |         27 |
| st   | 0300000000000000 |          1 |         28 |
| su   | 0300000000000000 |          1 |         28 |
| ta   | 0400000000000000 |          1 |         40 |
| ta   | 0500000000000000 |          1 |         27 |
| te   | 0200000000000000 |          1 |         22 |
| te   | 0300000000000000 |          1 |         28 |
| th   | 0400000000000000 |          1 |         40 |
| th   | 0500000000000000 |          1 |         27 |
| ti   | 0300000000000000 |          1 |         28 |
| ti   | 0400000000000000 |          2 |         40 |
| to   | 0500000000000000 |          1 |         27 |
| tu   | 0500000000000000 |          1 |         27 |
| ty   | 0300000000000000 |          1 |         28 |
| ua   | 0300000000000000 |          1 |         28 |
| ue   | 0400000000000000 |          1 |         40 |
| ui   | 0400000000000000 |          1 |         40 |
| ul   | 0200000000000000 |          2 |         22 |
| ur   | 0300000000000000 |          1 |         28 |
| us   | 0200000000000000 |          1 |         22 |
| us   | 0500000000000000 |          1 |         27 |
| ut   | 0500000000000000 |          2 |         27 |
| ve   | 0200000000000000 |          1 |         22 |
| wr   | 0300000000000000 |          1 |         28 |
| xt   | 0200000000000000 |          1 |         22 |
| za   | 0400000000000000 |          1 |         40 |
+------+------------------+------------+------------+
+--------------+------------------+------------+------------+
| word         | doc_id           | word_count | doc_length |
+--------------+------------------+------------+------------+
| can          | 0200000000000000 |          1 |          7 |
| case         | 0300000000000000 |          1 |          9 |
| cases        | 0300000000000000 |          1 |          9 |
| database     | 0400000000000000 |          1 |          7 |
| database     | 0500000000000000 |          1 |          5 |
| databases    | 0500000000000000 |          1 |          5 |
| ensure       | 0300000000000000 |          1 |          9 |
| fulltext     | 0200000000000000 |          2 |          7 |
| guide        | 0400000000000000 |          1 |          7 |
| helps        | 0300000000000000 |          1 |          9 |
| index        | 0200000000000000 |          1 |          7 |
| indexing     | 0200000000000000 |          1 |          7 |
| oceanbase    | 0300000000000000 |          1 |          9 |
| oceanbase    | 0400000000000000 |          2 |          7 |
| optimization | 0400000000000000 |          1 |          7 |
| optimizing   | 0400000000000000 |          1 |          7 |
| quality      | 0300000000000000 |          1 |          9 |
| query        | 0400000000000000 |          1 |          7 |
| test         | 0300000000000000 |          2 |          9 |
| tutorial     | 0500000000000000 |          1 |          5 |
| use          | 0500000000000000 |          1 |          5 |
| useful       | 0200000000000000 |          1 |          7 |
| using        | 0500000000000000 |          1 |          5 |
| very         | 0200000000000000 |          1 |          7 |
| writing      | 0300000000000000 |          1 |          9 |
+--------------+------------------+------------+------------+
========================== drop ===========================
DROP TABLE fts_basic_dml_articles;
####### Create Partition Table With Fulltext index #######
======================== create ==========================
CREATE TABLE fts_basic_dml_articles (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    content TEXT,
    FULLTEXT INDEX ctx1(title) WITH PARSER beng,
    FULLTEXT INDEX ctx2(content) WITH PARSER ngram,
    FULLTEXT INDEX ctx3(title, content) WITH PARSER space
) PARTITION BY HASH(id) PARTITIONS 64;
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(200) DEFAULT NULL,
  `content` text DEFAULT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `ctx1` (`title`) WITH PARSER beng PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384,
  FULLTEXT KEY `ctx2` (`content`) WITH PARSER ngram PARSER_PROPERTIES=(ngram_token_size=2) BLOCK_SIZE 16384,
  FULLTEXT KEY `ctx3` (`title`, `content`) WITH PARSER space PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384
) ORGANIZATION INDEX AUTO_INCREMENT = 1 AUTO_INCREMENT_MODE = 'ORDER' DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = replica_num BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE ENABLE_MACRO_BLOCK_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0
 partition by hash(id)
(partition `p0`,
partition `p1`,
partition `p2`,
partition `p3`,
partition `p4`,
partition `p5`,
partition `p6`,
partition `p7`,
partition `p8`,
partition `p9`,
partition `p10`,
partition `p11`,
partition `p12`,
partition `p13`,
partition `p14`,
partition `p15`,
partition `p16`,
partition `p17`,
partition `p18`,
partition `p19`,
partition `p20`,
partition `p21`,
partition `p22`,
partition `p23`,
partition `p24`,
partition `p25`,
partition `p26`,
partition `p27`,
partition `p28`,
partition `p29`,
partition `p30`,
partition `p31`,
partition `p32`,
partition `p33`,
partition `p34`,
partition `p35`,
partition `p36`,
partition `p37`,
partition `p38`,
partition `p39`,
partition `p40`,
partition `p41`,
partition `p42`,
partition `p43`,
partition `p44`,
partition `p45`,
partition `p46`,
partition `p47`,
partition `p48`,
partition `p49`,
partition `p50`,
partition `p51`,
partition `p52`,
partition `p53`,
partition `p54`,
partition `p55`,
partition `p56`,
partition `p57`,
partition `p58`,
partition `p59`,
partition `p60`,
partition `p61`,
partition `p62`,
partition `p63`)
SHOW INDEX FROM fts_basic_dml_articles;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment	Visible	Expression
fts_basic_dml_articles	0	PRIMARY	1	id	A	NULL	NULL	NULL		BTREE	available		YES	NULL
fts_basic_dml_articles	1	ctx1	1	title	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx2	1	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx3	1	title	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx3	2	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
======================== insert ==========================
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('OceanBase Tutorial', 'This is a tutorial about Oceanbase Fulltext.'),
('Fulltext Index', 'Fulltext index can be very useful.'),
('OceanBase Test Case', 'Writing test cases helps ensure quality.');
select * from fts_basic_dml_articles order by id;
+----+---------------------+----------------------------------------------+
| id | title               | content                                      |
+----+---------------------+----------------------------------------------+
|  1 | OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
|  2 | Fulltext Index      | Fulltext index can be very useful.           |
|  3 | OceanBase Test Case | Writing test cases helps ensure quality.     |
+----+---------------------+----------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  1 | 0100000000000000 |
|  2 | 0100000000000000 |
|  3 | 0100000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0100000000000000 |  1 |
| 0100000000000000 |  2 |
| 0100000000000000 |  3 |
+------------------+----+
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('Optimizing OceanBase', 'This is a query optimization guide for OceanBase Database.'),
('How to use Database', 'This is a using tutorial about Databases.');
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  1 | OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
|  2 | Fulltext Index       | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  1 | 0100000000000000 |
|  2 | 0100000000000000 |
|  3 | 0100000000000000 |
|  4 | 0100000000000000 |
|  5 | 0100000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0100000000000000 |  1 |
| 0100000000000000 |  2 |
| 0100000000000000 |  3 |
| 0100000000000000 |  4 |
| 0100000000000000 |  5 |
+------------------+----+
========================= update ==========================
EXPLAIN UPDATE fts_basic_dml_articles SET title = 'Fulltext Indexing' WHERE id = 2;
Query Plan
=============================================================
|ID|OPERATOR   |NAME                  |EST.ROWS|EST.TIME(us)|
-------------------------------------------------------------
|0 |UPDATE     |                      |1       |62          |
|1 |TABLE GET|fts_basic_dml_articles|1       |30          |
=============================================================
Outputs & filters:
-------------------------------------
  0 - output(nil), filter(nil)
      table_columns([{fts_basic_dml_articles: ({fts_basic_dml_articles: (fts_basic_dml_articles.id, fts_basic_dml_articles.title, fts_basic_dml_articles.content,
       fts_basic_dml_articles.__doc_id_*, fts_basic_dml_articles.__word_segment_*_*, fts_basic_dml_articles.__word_count_*_*,
       fts_basic_dml_articles.__doc_length_*_*, fts_basic_dml_articles.__word_segment_*_*, fts_basic_dml_articles.__word_count_*_*,
       fts_basic_dml_articles.__doc_length_*_*, fts_basic_dml_articles.__word_segment_*_*, fts_basic_dml_articles.__word_count_*_*,
       fts_basic_dml_articles.__doc_length_*_*)})}]),
      update([fts_basic_dml_articles.title=column_conv(VARCHAR,utf8mb4_general_ci,length:200,NULL,'Fulltext Indexing')], [fts_basic_dml_articles.__word_segment_*_*=WORD_SEGMENT(column_c
      onv(VARCHAR,utf8mb4_general_ci,length:200,NULL,'Fulltext Indexing'))], [fts_basic_dml_articles.__word_count_*_*=WORD_COUNT(column_conv(VARCHAR,
      utf8mb4_general_ci,length:200,NULL,'Fulltext Indexing'))], [fts_basic_dml_articles.__doc_length_*_*=DOC_LENGTH(column_conv(VARCHAR,utf8mb4_general_ci,
      length:200,NULL,'Fulltext Indexing'))], [fts_basic_dml_articles.__word_segment_*_*=WORD_SEGMENT(column_conv(VARCHAR,utf8mb4_general_ci,length:200,
      NULL,'Fulltext Indexing'), fts_basic_dml_articles.content)], [fts_basic_dml_articles.__word_count_*_*=WORD_COUNT(column_conv(VARCHAR,utf8mb4_general_ci,
      length:200,NULL,'Fulltext Indexing'), fts_basic_dml_articles.content)], [fts_basic_dml_articles.__doc_length_*_*=DOC_LENGTH(column_conv(VARCHAR,
      utf8mb4_general_ci,length:200,NULL,'Fulltext Indexing'), fts_basic_dml_articles.content)])
  1 - output([fts_basic_dml_articles.id], [fts_basic_dml_articles.title], [WORD_SEGMENT(fts_basic_dml_articles.title)], [WORD_COUNT(fts_basic_dml_articles.title)],
       [DOC_LENGTH(fts_basic_dml_articles.title)], [fts_basic_dml_articles.content], [WORD_SEGMENT(fts_basic_dml_articles.title, fts_basic_dml_articles.content)],
       [WORD_COUNT(fts_basic_dml_articles.title, fts_basic_dml_articles.content)], [DOC_LENGTH(fts_basic_dml_articles.title, fts_basic_dml_articles.content)],
       [fts_basic_dml_articles.__doc_id_*], [WORD_SEGMENT(fts_basic_dml_articles.content)], [WORD_COUNT(fts_basic_dml_articles.content)], [DOC_LENGTH(fts_basic_dml_articles.content)]), filter(nil), rowset=16
      access([fts_basic_dml_articles.id], [fts_basic_dml_articles.title], [fts_basic_dml_articles.content], [fts_basic_dml_articles.__doc_id_*]), partitions(p2)
      is_index_back=false, is_global_index=false, with_domain_id(doc_id),
      range_key([fts_basic_dml_articles.id]), range[2 ; 2],
      range_cond([fts_basic_dml_articles.id = 2])
UPDATE fts_basic_dml_articles SET title = 'Fulltext Indexing' WHERE id = 2;
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  1 | OceanBase Tutorial   | This is a tutorial about Oceanbase Fulltext.               |
|  2 | Fulltext Indexing    | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  1 | 0100000000000000 |
|  2 | 0100000000000000 |
|  3 | 0100000000000000 |
|  4 | 0100000000000000 |
|  5 | 0100000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0100000000000000 |  1 |
| 0100000000000000 |  2 |
| 0100000000000000 |  3 |
| 0100000000000000 |  4 |
| 0100000000000000 |  5 |
+------------------+----+
========================= delete ==========================
DELETE FROM fts_basic_dml_articles WHERE id = 1;
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  2 | Fulltext Indexing    | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
+----+------------------+
| id | doc_id           |
+----+------------------+
|  2 | 0100000000000000 |
|  3 | 0100000000000000 |
|  4 | 0100000000000000 |
|  5 | 0100000000000000 |
+----+------------------+
+------------------+----+
| doc_id           | id |
+------------------+----+
| 0100000000000000 |  2 |
| 0100000000000000 |  3 |
| 0100000000000000 |  4 |
| 0100000000000000 |  5 |
+------------------+----+
========================== drop ===========================
DROP TABLE fts_basic_dml_articles;
################ replace into with varchar ################
DROP TABLE IF EXISTS basic_dml_t1;
DROP TABLE IF EXISTS basic_dml_t2;
CREATE TABLE basic_dml_t1 (a int PRIMARY KEY, b varchar(10000), FULLTEXT INDEX(b));
CREATE TABLE basic_dml_t2 (a int, b varchar(10000));
INSERT INTO basic_dml_t1 VALUES (1, 'aaaa'), (2, 'bbbb');
INSERT INTO basic_dml_t2 VALUES (10, 'aaaa'), (2, 'cccc');
SELECT * FROM basic_dml_t1;
+---+------+
| a | b    |
+---+------+
| 1 | aaaa |
| 2 | bbbb |
+---+------+
REPLACE INTO basic_dml_t1 SELECT * FROM basic_dml_t2;
SELECT * FROM basic_dml_t1;
+----+------+
| a  | b    |
+----+------+
|  1 | aaaa |
|  2 | cccc |
| 10 | aaaa |
+----+------+
SELECT * FROM basic_dml_t2;
+------+------+
| a    | b    |
+------+------+
|   10 | aaaa |
|    2 | cccc |
+------+------+
################# replace into with text ##################
DROP TABLE IF EXISTS basic_dml_t1;
DROP TABLE IF EXISTS basic_dml_t2;
CREATE TABLE basic_dml_t1 (a int PRIMARY KEY, b text, FULLTEXT INDEX(b));
CREATE TABLE basic_dml_t2 (a int, b text);
INSERT INTO basic_dml_t1 VALUES (1, 'aaaa'), (2, 'bbbb');
INSERT INTO basic_dml_t2 VALUES (10, 'aaaa'), (2, 'cccc');
SELECT * FROM basic_dml_t1;
+---+------+
| a | b    |
+---+------+
| 1 | aaaa |
| 2 | bbbb |
+---+------+
REPLACE INTO basic_dml_t1 SELECT * FROM basic_dml_t2;
SELECT * FROM basic_dml_t1;
+----+------+
| a  | b    |
+----+------+
|  1 | aaaa |
|  2 | cccc |
| 10 | aaaa |
+----+------+
SELECT * FROM basic_dml_t2;
+------+------+
| a    | b    |
+------+------+
|   10 | aaaa |
|    2 | cccc |
+------+------+
DROP TABLE basic_dml_t1;
DROP TABLE basic_dml_t2;
######## Create Table With Normal And Fulltext Index  #########
======================== create ==========================
CREATE TABLE fts_basic_dml_articles (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    content TEXT,
    FULLTEXT INDEX ctx1(title),
    INDEX i1(title),
    INDEX i2(id),
    FULLTEXT INDEX ctx3(title, content) WITH PARSER beng
);
SHOW CREATE TABLE fts_basic_dml_articles;
Table	Create Table
fts_basic_dml_articles	CREATE TABLE `fts_basic_dml_articles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(200) DEFAULT NULL,
  `content` text DEFAULT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `ctx1` (`title`) WITH PARSER space PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384,
  KEY `i1` (`title`) BLOCK_SIZE 16384 LOCAL,
  KEY `i2` (`id`) BLOCK_SIZE 16384 LOCAL,
  FULLTEXT KEY `ctx3` (`title`, `content`) WITH PARSER beng PARSER_PROPERTIES=(min_token_size=3,max_token_size=84) BLOCK_SIZE 16384
) ORGANIZATION INDEX AUTO_INCREMENT = 1 AUTO_INCREMENT_MODE = 'ORDER' DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = replica_num BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE ENABLE_MACRO_BLOCK_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0
SHOW INDEX FROM fts_basic_dml_articles;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment	Visible	Expression
fts_basic_dml_articles	0	PRIMARY	1	id	A	NULL	NULL	NULL		BTREE	available		YES	NULL
fts_basic_dml_articles	1	ctx1	1	title	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	i1	1	title	A	NULL	NULL	NULL	YES	BTREE	available		YES	NULL
fts_basic_dml_articles	1	i2	1	id	A	NULL	NULL	NULL		BTREE	available		YES	NULL
fts_basic_dml_articles	1	ctx3	1	title	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
fts_basic_dml_articles	1	ctx3	2	content	A	NULL	NULL	NULL	YES	FULLTEXT	available		YES	NULL
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('OceanBase Tutorial', 'This is a tutorial about Oceanbase Fulltext.'),
('Fulltext Index', 'Fulltext index can be very useful.'),
('OceanBase Test Case', 'Writing test cases helps ensure quality.');
INSERT INTO fts_basic_dml_articles (title, content) VALUES
('Optimizing OceanBase', 'This is a query optimization guide for OceanBase Database.'),
('How to use Database', 'This is a using tutorial about Databases.');
UPDATE fts_basic_dml_articles SET title = 'Fulltext Indexing' WHERE title = 'Fulltext Index';
DELETE FROM fts_basic_dml_articles WHERE id = 1;
select * from fts_basic_dml_articles order by id;
+----+----------------------+------------------------------------------------------------+
| id | title                | content                                                    |
+----+----------------------+------------------------------------------------------------+
|  2 | Fulltext Indexing    | Fulltext index can be very useful.                         |
|  3 | OceanBase Test Case  | Writing test cases helps ensure quality.                   |
|  4 | Optimizing OceanBase | This is a query optimization guide for OceanBase Database. |
|  5 | How to use Database  | This is a using tutorial about Databases.                  |
+----+----------------------+------------------------------------------------------------+
DROP TABLE IF EXISTS fts_basic_dml_articles;
DROP TABLE IF EXISTS fts_czt_coupon_main_body;
######## Create Table With Multivalue and Fulltext Index  #########
CREATE TABLE fts_czt_coupon_main_body (
    coupon_body_id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'id',
    coupon_name VARCHAR(60)  NOT NULL DEFAULT '' COMMENT '',
    extra_contains json NOT NULL COMMENT 'ID',
    PRIMARY KEY (coupon_body_id) ,
    KEY contain_store_ids_index ((CAST(json_extract(extra_contains,'$.contain_store_ids') AS UNSIGNED array))),
    FULLTEXT KEY coupon_name_index (coupon_name) WITH PARSER ngram
) AUTO_INCREMENT=1265 COMMENT='';
INSERT INTO fts_czt_coupon_main_body (coupon_name, extra_contains) VALUES
('A', '{"contain_store_ids": [1000010001, 1000010002, 1000010003]}'),
('B', '{"contain_store_ids": [2000010001, 2000010002, 2000010003]}');
SELECT * FROM fts_czt_coupon_main_body order by coupon_body_id;
+----------------+-------------+-------------------------------------------------------------+
| coupon_body_id | coupon_name | extra_contains                                              |
+----------------+-------------+-------------------------------------------------------------+
|           1265 | A     | {"contain_store_ids": [1000010001, 1000010002, 1000010003]} |
|           1266 | B     | {"contain_store_ids": [2000010001, 2000010002, 2000010003]} |
+----------------+-------------+-------------------------------------------------------------+
SELECT *, MATCH(coupon_name) AGAINST("B") FROM fts_czt_coupon_main_body WHERE MATCH(coupon_name) AGAINST("B");
+----------------+-------------+-------------------------------------------------------------+------------------------------------------+
| coupon_body_id | coupon_name | extra_contains                                              | MATCH(coupon_name) AGAINST("B")    |
+----------------+-------------+-------------------------------------------------------------+------------------------------------------+
|           1266 | B     | {"contain_store_ids": [2000010001, 2000010002, 2000010003]} |                        1.050955414012739 |
|           1265 | A     | {"contain_store_ids": [1000010001, 1000010002, 1000010003]} |                       0.7006369426751594 |
+----------------+-------------+-------------------------------------------------------------+------------------------------------------+
SELECT *, MATCH(coupon_name) AGAINST("B") FROM fts_czt_coupon_main_body WHERE MATCH(coupon_name) AGAINST("B") limit 1;
+----------------+-------------+-------------------------------------------------------------+------------------------------------------+
| coupon_body_id | coupon_name | extra_contains                                              | MATCH(coupon_name) AGAINST("B")    |
+----------------+-------------+-------------------------------------------------------------+------------------------------------------+
|           1266 | B     | {"contain_store_ids": [2000010001, 2000010002, 2000010003]} |                        1.050955414012739 |
+----------------+-------------+-------------------------------------------------------------+------------------------------------------+
DROP TABLE fts_czt_coupon_main_body;
DROP TABLE IF EXISTS fts_compat_mysql_articles;
######## Test Fulltext MIN/MAX WORD LENGTH #########
CREATE TABLE fts_compat_mysql_articles (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    body TEXT,
    FULLTEXT INDEX ctx(title, body)
);
INSERT INTO fts_compat_mysql_articles (title) VALUES ("abc_df");
select * from fts_compat_mysql_articles where match(title, body) against('abc');
+----+-------+------+
| id | title | body |
+----+-------+------+
+----+-------+------+
select * from fts_compat_mysql_articles where match(title, body) against('df');
+----+-------+------+
| id | title | body |
+----+-------+------+
+----+-------+------+
select * from fts_compat_mysql_articles where match(title, body) against('abc df');
+----+-------+------+
| id | title | body |
+----+-------+------+
+----+-------+------+
select * from fts_compat_mysql_articles where match(title, body) against('abc_df');
+----+--------+------+
| id | title  | body |
+----+--------+------+
|  1 | abc_df | NULL |
+----+--------+------+
DROP TABLE fts_compat_mysql_articles;
DROP TABLE IF EXISTS fts_min_max_word_articles;
######## Test Fulltext MIN/MAX WORD LENGTH #########
CREATE TABLE fts_min_max_word_articles (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    body TEXT,
    FULLTEXT INDEX ctx(title, body)
);
======================== insert ==========================
INSERT INTO fts_min_max_word_articles (title, body) VALUES
("wordlen2", "ab"),
('wordlen3', 'abc'),
('wordlen4', 'abcd'),
("wordlen78", "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),
('wordlen83', 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz12345'),
('wordlen84', 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456'),
('wordlen85', 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567');
select * from fts_min_max_word_articles order by id;
+----+-----------+---------------------------------------------------------------------------------------+
| id | title     | body                                                                                  |
+----+-----------+---------------------------------------------------------------------------------------+
|  1 | wordlen2  | ab                                                                                    |
|  2 | wordlen3  | abc                                                                                   |
|  3 | wordlen4  | abcd                                                                                  |
|  4 | wordlen78 | abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz        |
|  5 | wordlen83 | abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz12345   |
|  6 | wordlen84 | abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456  |
|  7 | wordlen85 | abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567 |
+----+-----------+---------------------------------------------------------------------------------------+
+--------------------------------------------------------------------------------------+------------------+------------+------------+
| word                                                                                 | doc_id           | word_count | doc_length |
+--------------------------------------------------------------------------------------+------------------+------------+------------+
| abc                                                                                  | 0200000000000000 |          1 |          2 |
| abcd                                                                                 | 0300000000000000 |          1 |          2 |
| abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz       | 0400000000000000 |          1 |          2 |
| abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz12345  | 0500000000000000 |          1 |          2 |
| abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz123456 | 0600000000000000 |          1 |          2 |
| wordlen2                                                                             | 0100000000000000 |          1 |          1 |
| wordlen3                                                                             | 0200000000000000 |          1 |          2 |
| wordlen4                                                                             | 0300000000000000 |          1 |          2 |
| wordlen78                                                                            | 0400000000000000 |          1 |          2 |
| wordlen83                                                                            | 0500000000000000 |          1 |          2 |
| wordlen84                                                                            | 0600000000000000 |          1 |          2 |
| wordlen85                                                                            | 0700000000000000 |          1 |          1 |
+--------------------------------------------------------------------------------------+------------------+------------+------------+
+------------------+--------------------------------------------------------------------------------------+------------+------------+
| doc_id           | word                                                                                 | word_count | doc_length |
+------------------+--------------------------------------------------------------------------------------+------------+------------+
| 0100000000000000 | wordlen2                                                                             |          1 |          1 |
| 0200000000000000 | abc                                                                                  |          1 |          2 |
| 0200000000000000 | wordlen3                                                                             |          1 |          2 |
| 0300000000000000 | abcd                                                                                 |          1 |          2 |
| 0300000000000000 | wordlen4                                                                             |          1 |          2 |
| 0400000000000000 | abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz       |          1 |          2 |
| 0400000000000000 | wordlen78                                                                            |          1 |          2 |
| 0500000000000000 | abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz12345  |          1 |          2 |
| 0500000000000000 | wordlen83                                                                            |          1 |          2 |
| 0600000000000000 | abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz123456 |          1 |          2 |
| 0600000000000000 | wordlen84                                                                            |          1 |          2 |
| 0700000000000000 | wordlen85                                                                            |          1 |          1 |
+------------------+--------------------------------------------------------------------------------------+------------+------------+
select * from fts_min_max_word_articles where match(title, body) against("ab");
+----+-------+------+
| id | title | body |
+----+-------+------+
+----+-------+------+
select * from fts_min_max_word_articles where match(title, body) against("abc");
+----+----------+------+
| id | title    | body |
+----+----------+------+
|  2 | wordlen3 | abc  |
+----+----------+------+
select * from fts_min_max_word_articles where match(title, body) against("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456");
+----+-----------+--------------------------------------------------------------------------------------+
| id | title     | body                                                                                 |
+----+-----------+--------------------------------------------------------------------------------------+
|  6 | wordlen84 | abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456 |
+----+-----------+--------------------------------------------------------------------------------------+
select * from fts_min_max_word_articles where match(title, body) against("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567");
+----+-------+------+
| id | title | body |
+----+-------+------+
+----+-------+------+
drop table fts_min_max_word_articles;
################# complex dml operation ##################
DROP TABLE IF EXISTS fts;
DROP TABLE IF EXISTS normal;
DROP VIEW IF EXISTS fts_view;
CREATE TABLE fts (a int PRIMARY KEY, b text, FULLTEXT INDEX(b));
CREATE TABLE normal (a int PRIMARY KEY, b text);
CREATE VIEW fts_view as select * from fts;
set ob_enable_index_direct_select = 'ON';
INSERT INTO fts values (1, 'aaaa'), (2, 'bbbb');
INSERT INTO normal values (1, 'aaaa'), (2, 'bbbb');
result_format: 4
insert into fts values (1, 'aaaa') ON DUPLICATE KEY UPDATE b = 'aaaa';
insert into normal values (1, 'aaaa') ON DUPLICATE KEY UPDATE b = 'aaaa';
+------+------------------+------------+------------+
| word | doc_id           | word_count | doc_length |
+------+------------------+------------+------------+
| aaaa | 0100000000000000 |          1 |          1 |
| bbbb | 0200000000000000 |          1 |          1 |
+------+------------------+------------+------------+
+------------------+------+------------+------------+
| doc_id           | word | word_count | doc_length |
+------------------+------+------------+------------+
| 0100000000000000 | aaaa |          1 |          1 |
| 0200000000000000 | bbbb |          1 |          1 |
+------------------+------+------------+------------+
replace into fts (a, b) values (1, 'aaaa');
replace into normal (a, b) values (1, 'aaaa');
+------+------------------+------------+------------+
| word | doc_id           | word_count | doc_length |
+------+------------------+------------+------------+
| aaaa | 0400000000000000 |          1 |          1 |
| bbbb | 0200000000000000 |          1 |          1 |
+------+------------------+------------+------------+
+------------------+------+------------+------------+
| doc_id           | word | word_count | doc_length |
+------------------+------+------------+------------+
| 0200000000000000 | bbbb |          1 |          1 |
| 0400000000000000 | aaaa |          1 |          1 |
+------------------+------+------------+------------+
insert into fts_view values (3, 'cccc'), (4, 'dddd');
insert into normal (a, b) values (3, 'aaaa');
select * from fts_view;
+---+------+
| a | b    |
+---+------+
| 1 | aaaa |
| 2 | bbbb |
| 3 | cccc |
| 4 | dddd |
+---+------+
select * from normal;
+---+------+
| a | b    |
+---+------+
| 1 | aaaa |
| 2 | bbbb |
| 3 | aaaa |
+---+------+
+------+------------------+------------+------------+
| word | doc_id           | word_count | doc_length |
+------+------------------+------------+------------+
| aaaa | 0400000000000000 |          1 |          1 |
| bbbb | 0200000000000000 |          1 |          1 |
| cccc | 0500000000000000 |          1 |          1 |
| dddd | 0600000000000000 |          1 |          1 |
+------+------------------+------------+------------+
+------------------+------+------------+------------+
| doc_id           | word | word_count | doc_length |
+------------------+------+------------+------------+
| 0200000000000000 | bbbb |          1 |          1 |
| 0400000000000000 | aaaa |          1 |          1 |
| 0500000000000000 | cccc |          1 |          1 |
| 0600000000000000 | dddd |          1 |          1 |
+------------------+------+------------+------------+
update fts join normal on fts.a = normal.a set fts.b = 'dddd', normal.b = 'eeee';
select * from fts_view;
+---+------+
| a | b    |
+---+------+
| 1 | dddd |
| 2 | dddd |
| 3 | dddd |
| 4 | dddd |
+---+------+
select * from normal;
+---+------+
| a | b    |
+---+------+
| 1 | eeee |
| 2 | eeee |
| 3 | eeee |
+---+------+
+------+------------------+------------+------------+
| word | doc_id           | word_count | doc_length |
+------+------------------+------------+------------+
| dddd | 0200000000000000 |          1 |          1 |
| dddd | 0400000000000000 |          1 |          1 |
| dddd | 0500000000000000 |          1 |          1 |
| dddd | 0600000000000000 |          1 |          1 |
+------+------------------+------------+------------+
+------------------+------+------------+------------+
| doc_id           | word | word_count | doc_length |
+------------------+------+------------+------------+
| 0200000000000000 | dddd |          1 |          1 |
| 0400000000000000 | dddd |          1 |          1 |
| 0500000000000000 | dddd |          1 |          1 |
| 0600000000000000 | dddd |          1 |          1 |
+------------------+------+------------+------------+
update fts join normal on fts.a = normal.a set fts.b = 'dddd';
update fts join normal on fts.a = normal.a set normal.b = fts.b;
select * from normal;
+---+------+
| a | b    |
+---+------+
| 1 | dddd |
| 2 | dddd |
| 3 | dddd |
+---+------+
select * from fts;
+---+------+
| a | b    |
+---+------+
| 1 | dddd |
| 2 | dddd |
| 3 | dddd |
| 4 | dddd |
+---+------+

update fts_view join normal on fts_view.a = normal.a set fts_view.b = 'dddd', normal.b = 'eeee';
update fts_view set b = 'dddd';
select * from fts;
+---+------+
| a | b    |
+---+------+
| 1 | dddd |
| 2 | dddd |
| 3 | dddd |
| 4 | dddd |
+---+------+
select * from fts_view;
+---+------+
| a | b    |
+---+------+
| 1 | dddd |
| 2 | dddd |
| 3 | dddd |
| 4 | dddd |
+---+------+
+------+------------------+------------+------------+
| word | doc_id           | word_count | doc_length |
+------+------------------+------------+------------+
| dddd | 0200000000000000 |          1 |          1 |
| dddd | 0400000000000000 |          1 |          1 |
| dddd | 0500000000000000 |          1 |          1 |
| dddd | 0600000000000000 |          1 |          1 |
+------+------------------+------------+------------+
+------------------+------+------------+------------+
| doc_id           | word | word_count | doc_length |
+------------------+------+------------+------------+
| 0200000000000000 | dddd |          1 |          1 |
| 0400000000000000 | dddd |          1 |          1 |
| 0500000000000000 | dddd |          1 |          1 |
| 0600000000000000 | dddd |          1 |          1 |
+------------------+------+------------+------------+
delete fts, normal from fts join normal on fts.a = normal.a;
delete fts from fts join normal on fts.a = normal.a;
delete fts from fts join normal on fts.a = normal.a;

delete normal from fts_view join normal on fts_view.a = normal.a and 1=0;
delete from fts_view where b = 'dddd';
+------+--------+------------+------------+
| word | doc_id | word_count | doc_length |
+------+--------+------------+------------+
+------+--------+------------+------------+
+--------+------+------------+------------+
| doc_id | word | word_count | doc_length |
+--------+------+------------+------------+
+--------+------+------------+------------+
drop table fts;
drop table normal;

################# empty token set ##################
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (a int, b text, FULLTEXT INDEX(b));
INSERT INTO t1 values(1, '');
INSERT INTO t1 values(2, 'is is');
INSERT INTO t1 values(3, ' ');

UPDATE t1 SET b = 'is' WHERE a = 1;
UPDATE t1 SET b = ' ' WHERE a = 2;
UPDATE t1 SET b = '' WHERE a = 3;
SELECT * FROM t1;
+------+------+
| a    | b    |
+------+------+
|    1 | is   |
|    2 |      |
|    3 |      |
+------+------+

SET SQL_MODE = '';
DROP TABLE IF EXISTS t1;
CREATE TABLE t1(a CHAR(1), FULLTEXT(a));
INSERT INTO t1 VALUES(0xACB0);
DELETE FROM t1 WHERE a < 2 LIMIT 4;

DROP TABLE t1;
DROP VIEW IF EXISTS fts_view;
################# rowkeys doesn't cover partition keys ##################
DROP TABLE IF EXISTS fts_partition_without_primary_key;
CREATE TABLE fts_partition_without_primary_key (
    id INT UNSIGNED,
    title VARCHAR(200),
    body TEXT,
    FULLTEXT INDEX ctx(title, body)
) partition by hash(id) partitions 3;

INSERT INTO fts_partition_without_primary_key (id, title, body) VALUES
(1, 'OceanBase Tutorial', 'This is a tutorial about Oceanbase Fulltext.'),
(2, 'Fulltext Index', 'Fulltext index can be very useful.'),
(3, 'OceanBase Test Case', 'Writing test cases helps ensure quality.');

SELECT * FROM fts_partition_without_primary_key;
+------+---------------------+----------------------------------------------+
| id   | title               | body                                         |
+------+---------------------+----------------------------------------------+
|    3 | OceanBase Test Case | Writing test cases helps ensure quality.     |
|    1 | OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
|    2 | Fulltext Index      | Fulltext index can be very useful.           |
+------+---------------------+----------------------------------------------+

select * from fts_partition_without_primary_key where match(title, body) against('oceanbase') order by id;
+------+---------------------+----------------------------------------------+
| id   | title               | body                                         |
+------+---------------------+----------------------------------------------+
|    1 | OceanBase Tutorial  | This is a tutorial about Oceanbase Fulltext. |
|    3 | OceanBase Test Case | Writing test cases helps ensure quality.     |
+------+---------------------+----------------------------------------------+

UPDATE fts_partition_without_primary_key SET body = 'dddd' WHERE id = 3;

select * from fts_partition_without_primary_key where match(title, body) against('dddd') order by id;
+------+---------------------+------+
| id   | title               | body |
+------+---------------------+------+
|    3 | OceanBase Test Case | dddd |
+------+---------------------+------+

## --disable_warnings
## DROP TABLE IF EXISTS muilt_value_table;
## --enable_warnings
## CREATE TABLE muilt_value_table (
##     id INT UNSIGNED,
##     extra_contains json NOT NULL COMMENT 'ID',
##     INDEX contain_store_ids_index ((CAST(json_extract(extra_contains,'$.contain_store_ids') AS UNSIGNED array)))
## ) partition by hash(id) partitions 3;
##
## DROP TABLE muilt_value_table;
DROP TABLE IF EXISTS fts_partition_article;
CREATE TABLE fts_partition_article(
    id INT UNSIGNED,
    p_id INT UNSIGNED,
    title VARCHAR(200),
    body TEXT
) partition by hash(p_id) partitions 3;

INSERT INTO fts_partition_article (id, p_id, title, body) VALUES
(1, 1, "a", "abc"), (2, 2, 'b', 'abcd'), (3, 3, 'c', 'abcde'),
(4, 1, "d", "def"), (5, 2, 'e', "defg"), (6, 3, 'e', "defgh"),
(7, 1, "h", "hij"), (8, 2, 'i', "hijk"), (9, 3, 'j', "hijkl");

select * from fts_partition_article order by id;
+------+------+-------+-------+
| id   | p_id | title | body  |
+------+------+-------+-------+
|    1 |    1 | a     | abc   |
|    2 |    2 | b     | abcd  |
|    3 |    3 | c     | abcde |
|    4 |    1 | d     | def   |
|    5 |    2 | e     | defg  |
|    6 |    3 | e     | defgh |
|    7 |    1 | h     | hij   |
|    8 |    2 | i     | hijk  |
|    9 |    3 | j     | hijkl |
+------+------+-------+-------+

update fts_partition_article set body = 'dddd' where id = 3;

select * from fts_partition_article order by id;
+------+------+-------+-------+
| id   | p_id | title | body  |
+------+------+-------+-------+
|    1 |    1 | a     | abc   |
|    2 |    2 | b     | abcd  |
|    3 |    3 | c     | dddd  |
|    4 |    1 | d     | def   |
|    5 |    2 | e     | defg  |
|    6 |    3 | e     | defgh |
|    7 |    1 | h     | hij   |
|    8 |    2 | i     | hijk  |
|    9 |    3 | j     | hijkl |
+------+------+-------+-------+

delete from fts_partition_article where id = 2;

select * from fts_partition_article order by id;
+------+------+-------+-------+
| id   | p_id | title | body  |
+------+------+-------+-------+
|    1 |    1 | a     | abc   |
|    3 |    3 | c     | dddd  |
|    4 |    1 | d     | def   |
|    5 |    2 | e     | defg  |
|    6 |    3 | e     | defgh |
|    7 |    1 | h     | hij   |
|    8 |    2 | i     | hijk  |
|    9 |    3 | j     | hijkl |
+------+------+-------+-------+

drop table fts_partition_article;

DROP TABLE IF EXISTS fts_bug56794259;
create table fts_bug56794259 (
  c1 int(127) NOT NULL,
  c4 varchar(86) COLLATE utf8mb4_bin NOT NULL,
  PRIMARY KEY (c1),
  FULLTEXT KEY ctx (c4)
) partition by range(c1+1) (partition p0 values less than (2000), partition p1 values less than (MAXVALUE));

INSERT INTO fts_bug56794259 (c1, c4) VALUES (40000, 'sssssddddd'), (111, 'dddddd');

UPDATE fts_bug56794259 SET fts_bug56794259.c1 = fts_bug56794259.c1;

DROP TABLE fts_bug56794259;

DROP TABLE IF EXISTS fts_bug56890647;
CREATE TABLE fts_bug56890647 (
  c1 varchar(100) NOT NULL,
  FULLTEXT KEY ctx (c1));

INSERT INTO fts_bug56890647 (c1) VALUES ("aaaa,bbbb,cccc"), ('aaaa'), ('aaaa,cccc');

SELECT * FROM fts_bug56890647 order by c1;
+----------------+
| c1             |
+----------------+
| aaaa           |
| aaaa,bbbb,cccc |
| aaaa,cccc      |
+----------------+

DROP TABLE fts_bug56890647;

DROP TABLE IF EXISTS tx_smpay_traderecord3;
CREATE TABLE tx_smpay_traderecord3 (
  recorddate date NOT NULL COMMENT '',
  recordyear int(4) NOT NULL COMMENT '',
  shopid int (11) NOT NULL COMMENT 'id',
  tradetype varchar (2) DEFAULT NULL COMMENT '',
  clusterids json DEFAULT NULL COMMENT 'id',
  groupids json DEFAULT NULL COMMENT 'id',
  PRIMARY KEY (recorddate,recordyear),
  INDEX tx_smpay_traderecord( (CAST(clusterids->>'$[*]' AS char(500) ARRAY)) )
) partition by range columns(recordyear) (
  partition `P2018`
   values less than (2019),
    partition `P2019`
  values
    less than (2020),
    partition `P2020`
  values
    less than (2021),
    partition `P2021`
  values
    less than (2022),
    partition `P2022`
  values
    less than (2023),
    partition `P2023`
  values
    less than (2024),
    partition `P2024`
  values
    less than (2025)
);

insert into tx_smpay_traderecord3 values('2018-01-02 10:00:00', 2018, 123, "a1", '[1,2,3]', '[100,101,102]');

explain update tx_smpay_traderecord3 set shopid = 3 where recorddate = '2018-01-02 10:00:00' and recordyear = 2018;
Query Plan
============================================================
|ID|OPERATOR   |NAME                 |EST.ROWS|EST.TIME(us)|
------------------------------------------------------------
|0 |UPDATE     |                     |0       |56          |
|1 |TABLE GET|tx_smpay_traderecord3|0       |32          |
============================================================
Outputs & filters:
-------------------------------------
  0 - output(nil), filter(nil)
      table_columns([{tx_smpay_traderecord3: ({tx_smpay_traderecord3: (tx_smpay_traderecord3.recorddate, tx_smpay_traderecord3.recordyear, tx_smpay_traderecord3.shopid,
       tx_smpay_traderecord3.tradetype, tx_smpay_traderecord3.clusterids, tx_smpay_traderecord3.groupids, tx_smpay_traderecord3.SYS_NC_mvi_*, tx_smpay_traderecord3.SYS_NC_mvi_arr_*,
       tx_smpay_traderecord3.__doc_id_*)})}]),
      update([tx_smpay_traderecord3.shopid=column_conv(INT,PS:(11,0),NOT NULL,3)])
  1 - output([tx_smpay_traderecord3.recorddate], [tx_smpay_traderecord3.recordyear], [tx_smpay_traderecord3.clusterids], [json_query(tx_smpay_traderecord3.clusterids,
       '$[*]', 2147486597143, 0, 2, 0, 0, 1, 1, 0, 1, 1, 0)], [tx_smpay_traderecord3.shopid], [tx_smpay_traderecord3.tradetype], [tx_smpay_traderecord3.groupids],
       [json_query(tx_smpay_traderecord3.clusterids, '$[*]', 2147486597143, 0, 2, 0, 0, 1, 1, 0, 1, 1, 1)], [tx_smpay_traderecord3.__doc_id_*]), filter(nil), rowset=16
      access([tx_smpay_traderecord3.recorddate], [tx_smpay_traderecord3.recordyear], [tx_smpay_traderecord3.clusterids], [tx_smpay_traderecord3.shopid],
       [tx_smpay_traderecord3.tradetype], [tx_smpay_traderecord3.groupids], [tx_smpay_traderecord3.__doc_id_*]), partitions(p0)
      is_index_back=false, is_global_index=false, with_domain_id(doc_id),
      range_key([tx_smpay_traderecord3.recorddate], [tx_smpay_traderecord3.recordyear]), range(MAX,MAX ; MIN,MIN)always false,
      range_cond([cast(tx_smpay_traderecord3.recorddate, MYSQL_DATETIME(-1, -1)) = cast('2018-01-02 10:00:00', MYSQL_DATETIME(-1, -1))], [tx_smpay_traderecord3.recordyear
      = 2018])

DROP TABLE tx_smpay_traderecord3;

DROP TABLE IF EXISTS test_alias_tt1;
CREATE TABLE `test_alias_tt1` (
  `c1` varchar(86) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  `c2` decimal(64,13) DEFAULT NULL,
  `c3` year(4) DEFAULT NULL,
  `c4` binary(105) NOT NULL,
  `c5` decimal(64,4) DEFAULT NULL,
  `c6` year(4) DEFAULT NULL,
  `c7` decimal(64,21) NOT NULL,
  `c8` bigint(127) NOT NULL,
  `c9` decimal(64,22) DEFAULT NULL,
  `c10` binary(95) DEFAULT NULL,
  `c11` int(127) DEFAULT NULL,
  `c12` binary(146) DEFAULT NULL,
  `c13` int(127) NOT NULL,
  `c14` decimal(64,20) DEFAULT NULL,
  `c15` binary(108) NOT NULL,
  PRIMARY KEY (`c4`, `c13`, `c15`, `c8`, `c7`, `c1`),
  UNIQUE KEY `u_0_tYOjXqgN` (`c8`, `c4`, `c13`, `c15`, `c7`, `c1`) BLOCK_SIZE 16384 LOCAL,
  UNIQUE KEY `g_u_1_qK` (`c8`, `c10`) BLOCK_SIZE 16384 GLOBAL,
  UNIQUE KEY `u_2_wYpNqOp` (`c1`, `c15`, `c4`, `c13`, `c8`, `c7`) BLOCK_SIZE 16384 LOCAL,
  UNIQUE KEY `u_3_KnkjPh` (`c8`, `c14`, `c4`, `c13`, `c15`, `c7`, `c1`) BLOCK_SIZE 16384 LOCAL,
  FULLTEXT KEY `f_0_EdoYutM` (`c1`) WITH PARSER space BLOCK_SIZE 16384,
  KEY `g_i_0_kkyEg` (`c14`) BLOCK_SIZE 16384 GLOBAL,
  KEY `g_i_1_XVx` (`c10`, `c2`, `c5`, `c15`) BLOCK_SIZE 16384 GLOBAL,
  KEY `i_2_wQbHms` (`c11`, `c1`) BLOCK_SIZE 16384 LOCAL,
  KEY `g_i_3_VQvB` (`c4`) BLOCK_SIZE 16384 GLOBAL
) DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = 3 BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0 WITH COLUMN GROUP(all columns, each column);

explain UPDATE test_alias_tt1 AS tt10 set tt10.c1 = tt10.c1 WHERE tt10.c1 like '%000%';
Query Plan
===============================================================
|ID|OPERATOR          |NAME             |EST.ROWS|EST.TIME(us)|
---------------------------------------------------------------
|0 |UPDATE            |                 |1       |41          |
|1 |TABLE RANGE SCAN|tt10(u_*_wYpNqOp)|1       |9           |
===============================================================
Outputs & filters:
-------------------------------------
  0 - output(nil), filter(nil)
      table_columns([{tt10: ({test_alias_tt1: (tt10.c4, tt10.c13, tt10.c15, tt10.c8, tt10.c7, tt10.c1, tt10.c2, tt10.c3, tt10.c5, tt10.c6, tt10.c9, tt10.c10,
       tt10.c11, tt10.c12, tt10.c14, tt10.__doc_id_*, tt10.__word_segment_*_*, tt10.__word_count_*_*, tt10.__doc_length_*_*)})}]),

      update([tt10.c1=column_conv(VARCHAR,utf8mb4_bin,length:86,NOT NULL,tt10.c1)], [tt10.__word_segment_*_*=WORD_SEGMENT(column_conv(VARCHAR,
      utf8mb4_bin,length:86,NOT NULL,tt10.c1))], [tt10.__word_count_*_*=WORD_COUNT(column_conv(VARCHAR,utf8mb4_bin,length:86,NOT NULL,tt10.c1))],
       [tt10.__doc_length_*_*=DOC_LENGTH(column_conv(VARCHAR,utf8mb4_bin,length:86,NOT NULL,tt10.c1))])
  1 - output([tt10.c4], [tt10.c13], [tt10.c15], [tt10.c8], [tt10.c7], [tt10.c1], [WORD_SEGMENT(tt10.c1)], [WORD_COUNT(tt10.c1)], [DOC_LENGTH(tt10.c1)],
      [tt10.c2], [tt10.c3], [tt10.c5], [tt10.c6], [tt10.c9], [tt10.c10], [tt10.c11], [tt10.c12], [tt10.c14], [tt10.__doc_id_*]), filter([(T_OP_LIKE,
       tt10.c1, cast('%000%', VARCHAR(1048576)), '\\')]), rowset=16
      access([tt10.c4], [tt10.c13], [tt10.c15], [tt10.c8], [tt10.c7], [tt10.c1], [tt10.c2], [tt10.c3], [tt10.c5], [tt10.c6], [tt10.c9], [tt10.c10], [tt10.c11],
       [tt10.c12], [tt10.c14], [tt10.__doc_id_*]), partitions(p0)
      is_index_back=true, is_global_index=false, with_domain_id(doc_id), filter_before_indexback[true],
      range_key([tt10.c1], [tt10.c15], [tt10.c4], [tt10.c13], [tt10.c8], [tt10.c7], [tt10.shadow_pk_*], [tt10.shadow_pk_*], [tt10.shadow_pk_*], [tt10.shadow_pk_*],
       [tt10.shadow_pk_*], [tt10.shadow_pk_*]), range(,MIN,MIN,MIN,MIN,MIN,MIN,MIN,MIN,MIN,MIN,MIN ; <FF><repeat 344 times>,MAX,MAX,MAX,MAX,MAX,MAX,MAX,MAX,MAX,
      MAX,MAX),
      range_cond([tt10.c1 IS NOT NULL])

DROP TABLE test_alias_tt1;

DROP TABLE IF EXISTS fts_changed_part_key;
alter system set _enable_defensive_check = 2;

CREATE TABLE fts_changed_part_key(
  c1 bigint(20) NOT NULL AUTO_INCREMENT,
  c2 bigint(20) NOT NULL,
  c3 varchar(5000) DEFAULT NULL,
  PRIMARY KEY (c1, c2),
  FULLTEXT KEY ctx (c3)
) partition by key(c2)
 (partition p0,
  partition p1,
  partition p2,
  partition p3,
  partition p4,
  partition p5,
  partition p6,
  partition p7,
  partition p8,
  partition p9,
  partition p10,
  partition p11,
  partition p12,
  partition p13,
  partition p14,
  partition p15,
  partition p16,
  partition p17,
  partition p18);

INSERT INTO fts_changed_part_key(c2, c3) VALUES (42584969, 'bbbb');
UPDATE fts_changed_part_key SET c2 = 45712355 WHERE c3 = 'bbbb';
UPDATE fts_changed_part_key SET c3 = 'cccc' WHERE c2 = 45712355;

DROP TABLE fts_changed_part_key;

alter system set _enable_defensive_check = 1;

CREATE TABLE fts_parser_name_test (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    content TEXT,
    FULLTEXT INDEX ctx(title, content)
);

SELECT parser_name FROM oceanbase.__all_virtual_table WHERE index_type = 13 And tenant_id = 1 AND *;
+-------------+
| parser_name |
+-------------+
| NULL        |
+-------------+
SELECT parser_name FROM oceanbase.__all_virtual_table WHERE index_type = 14 And tenant_id = 1 AND *;
+-------------+
| parser_name |
+-------------+
| NULL        |
+-------------+
SELECT parser_name FROM oceanbase.__all_virtual_table WHERE index_type = 15 And tenant_id = 1 AND *;
+-------------+
| parser_name |
+-------------+
| space.1     |
+-------------+
SELECT parser_name FROM oceanbase.__all_virtual_table WHERE index_type = 16 And tenant_id = 1 AND *;
+-------------+
| parser_name |
+-------------+
| space.1     |
+-------------+





SELECT column_name, is_hidden FROM oceanbase.__all_virtual_column WHERE tenant_id = 1 AND *;
+---------------------------+-----------+
| column_name               | is_hidden |
+---------------------------+-----------+
| id                        |         0 |
| __doc_id_*                |         0 |
+---------------------------+-----------+
SELECT column_name, is_hidden FROM oceanbase.__all_virtual_column WHERE tenant_id = 1 AND *;
+---------------------------+-----------+
| column_name               | is_hidden |
+---------------------------+-----------+
| id                        |         0 |
| __doc_id_*                |         0 |
+---------------------------+-----------+
SELECT column_name, is_hidden FROM oceanbase.__all_virtual_column WHERE tenant_id = 1 AND *;
+------------------------------------+-----------+
| column_name                        | is_hidden |
+------------------------------------+-----------+
| __doc_id_*                         |         0 |
| __word_segment_*_*                 |         0 |
| __word_count_*_*                   |         0 |
| __doc_length_*_*                   |         0 |
+------------------------------------+-----------+
SELECT column_name, is_hidden FROM oceanbase.__all_virtual_column WHERE tenant_id = 1 AND *;
+------------------------------------+-----------+
| column_name                        | is_hidden |
+------------------------------------+-----------+
| __doc_id_*                         |         0 |
| __word_segment_*_*                 |         0 |
| __word_count_*_*                   |         0 |
| __doc_length_*_*                   |         0 |
+------------------------------------+-----------+

DROP TABLE fts_parser_name_test;

CREATE TABLE fts_parser_name_test (
    title VARCHAR(200),
    content TEXT,
    FULLTEXT INDEX ctx(title, content)
);




SELECT column_name, is_hidden FROM oceanbase.__all_virtual_column WHERE tenant_id = 1 AND *;
+---------------------------+-----------+
| column_name               | is_hidden |
+---------------------------+-----------+
| id                        |         0 |
| __doc_id_*                |         0 |
+---------------------------+-----------+
SELECT column_name, is_hidden FROM oceanbase.__all_virtual_column WHERE tenant_id = 1 AND *;
+---------------------------+-----------+
| column_name               | is_hidden |
+---------------------------+-----------+
| id                        |         0 |
| __doc_id_*                |         0 |
+---------------------------+-----------+
SELECT column_name, is_hidden FROM oceanbase.__all_virtual_column WHERE tenant_id = 1 AND *;
+------------------------------------+-----------+
| column_name                        | is_hidden |
+------------------------------------+-----------+
| __doc_id_*                         |         0 |
| __word_segment_*_*                 |         0 |
| __word_count_*_*                   |         0 |
| __doc_length_*_*                   |         0 |
+------------------------------------+-----------+
SELECT column_name, is_hidden FROM oceanbase.__all_virtual_column WHERE tenant_id = 1 AND *;
+------------------------------------+-----------+
| column_name                        | is_hidden |
+------------------------------------+-----------+
| __doc_id_*                         |         0 |
| __word_segment_*_*                 |         0 |
| __word_count_*_*                   |         0 |
| __doc_length_*_*                   |         0 |
+------------------------------------+-----------+

DROP TABLE fts_parser_name_test;
create table fts_parser_name_test(seq_id int PRIMARY KEY, detail varchar(4096)) partition by hash(seq_id) partitions 2;
CREATE FULLTEXT INDEX fts_parser_name_test_index on fts_parser_name_test(detail);


select operation_type, ddl_stmt_str from oceanbase.__all_ddl_operation where * and *;
+----------------+--------------+
| operation_type | ddl_stmt_str |
+----------------+--------------+
|             20 |              |
|             13 |              |
+----------------+--------------+
select operation_type, ddl_stmt_str from oceanbase.__all_ddl_operation where * and *;
+----------------+--------------+
| operation_type | ddl_stmt_str |
+----------------+--------------+
|             20 |              |
|             13 |              |
+----------------+--------------+
select operation_type, ddl_stmt_str from oceanbase.__all_ddl_operation where * and *;
+----------------+----------------------------------------------------------------------------------+
| operation_type | ddl_stmt_str                                                                     |
+----------------+----------------------------------------------------------------------------------+
|             20 |                                                                                  |
|             13 | CREATE FULLTEXT INDEX fts_parser_name_test_index on fts_parser_name_test(detail) |
+----------------+----------------------------------------------------------------------------------+
select operation_type, ddl_stmt_str from oceanbase.__all_ddl_operation where * and *;
+----------------+--------------+
| operation_type | ddl_stmt_str |
+----------------+--------------+
|             20 |              |
|             13 |              |
+----------------+--------------+

DROP TABLE fts_parser_name_test;

========= for some charset =========
=== utf8 for tokenize result ===
select tokenize("abc ;", 'space');
+----------------------------------------------------------------------------------------------------+
| tokenize("abc ;", 'space')                         |
+----------------------------------------------------------------------------------------------------+
| ["", "", "", "abc", ""]                                    |
+----------------------------------------------------------------------------------------------------+

drop table if exists t1;
create table t1(trailing_space VARCHAR(256), fulltext index ft1(trailing_space) with parser space) DEFAULT CHARSET = utf16;

insert into t1 values("abc ;");

select * from t1 where match(trailing_space) against ('abc' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+

select tokenize("abc ;", 'ngram');
+--------------------------------------------------------------------------------------------------------------------------+
| tokenize("abc ;", 'ngram')                                               |
+--------------------------------------------------------------------------------------------------------------------------+
| ["ab", "", "", "", "c", "", "", "", "", "", "bc", "", ""]                      |
+--------------------------------------------------------------------------------------------------------------------------+

drop table if exists t1;
create table t1(trailing_space VARCHAR(256), fulltext index ft1(trailing_space) with parser ngram) DEFAULT CHARSET = utf16;
insert into t1 values("abc ;");
select * from t1 where match(trailing_space) against ('ab' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+
select * from t1 where match(trailing_space) against ('c' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+-------------------------------------------------------------------------------+
| trailing_space                                                                |
+-------------------------------------------------------------------------------+
| abc ;                         |
+-------------------------------------------------------------------------------+

=== should not found ===
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+----------------+
| trailing_space |
+----------------+
+----------------+
select * from t1 where match(trailing_space) against ('' IN BOOLEAN MODE);
+----------------+
| trailing_space |
+----------------+
+----------------+

select tokenize("abc ;", 'ngram2');
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| tokenize("abc ;", 'ngram2')                                                                                                                                                                                              |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ["ab", "", "", "", "", "", "", "", "", "c", "", "", "", "bc", "", "", "", "abc", "", "bc", "", "c", "", "", ""]                                                    |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

drop table t1;
drop database fts_basic_dml;
