alter system set debug_sync_timeout = '100000s';
set ob_global_debug_sync = 'reset';
set recyclebin = OFF;
set ob_query_timeout = 10000000000;
drop database if exists test_mv_schema_check;
create database test_mv_schema_check;
use test_mv_schema_check;
create table t1(c1 int);
insert into t1 values(1),(2),(3),(4),(5),(6),(7),(8),(9),(10);
set ob_global_debug_sync = 'BEFORE_MV_FINISH_COMPLETE_REFRESH wait_for signalxxx execute 10000';
create materialized view mv1 as select * from t1;
select * from mv1;
ERROR 42S02: Table 'test_mv_schema_check.mv1' doesn't exist
set ob_global_debug_sync = 'now signal signalxxx';
set ob_global_debug_sync = 'reset';
select * from mv1 order by c1;
c1
1
2
3
4
5
6
7
8
9
10
drop database test_mv_schema_check;
