--disable_query_log
set @@session.explicit_defaults_for_timestamp=off;
--enable_query_log
--result_format 3
#owner:link.zt
#owner group: sql1
# tags: optimizer

## fix bug
--disable_warnings
drop table if exists t1, t2;
--enable_warnings
create table t1 (c1 int, c2 int, primary key(c1, c2));
create table t2 (d1 int, primary key(d1));
insert into t1 values (3, 3), (3, 7), (3, -20), (4, 4), (5, 5), (7,7);
insert into t2 values (3), (4), (5), (7);
select /*+ leading(t1 t2) use_merge(t1 t2) */ * from t1, t2 where t1.c2 = t2.d1 and t1.c1 = t2.d1;
select /*+ leading(t1 t2) use_hash(t1 t2) */ * from t1, t2 where t1.c2 = t2.d1 and t1.c1 = t2.d1;
select /*+ leading(t1 t2) use_nl(t1 t2) */ * from t1, t2 where t1.c2 = t2.d1 and t1.c1 = t2.d1;
explain select /*+ leading(t1 t2) use_merge(t1 t2) */ * from t1, t2 where t1.c2 = t2.d1 and t1.c1 = t2.d1;