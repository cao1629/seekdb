#owner: lb446709
#owner group: shenzhen
--echo # ----------------------------------------------------------------------
--echo # Test of sparse vector dml
--echo # ----------------------------------------------------------------------

--disable_warnings
drop table if exists test_sparse_vec_tbl;
--enable_warnings

# 复制表
create table test_sparse_vec_tbl (
  id int primary key, c1 bool, c2 int, c3 decimal, c4 float, c5 bit,
  c6 date, c7 varchar(10), c8 text, c9 json, c10 GEOMETRY,
  c11 array(int), c12 vector(3), c13 map(int, int), c14 sparsevector) ;
--source sparse_vec_dml.inc

# 队列表
create table test_sparse_vec_tbl (
  id int primary key, c1 bool, c2 int, c3 decimal, c4 float, c5 bit,
  c6 date, c7 varchar(10), c8 text, c9 json, c10 GEOMETRY,
  c11 array(int), c12 vector(3), c13 map(int, int), c14 sparsevector) table_mode='queuing';
--source sparse_vec_dml.inc

# 其他列创建索引
alter system set ob_vector_memory_limit_percentage =44;

create table test_sparse_vec_tbl (
  id int primary key, c1 bool, c2 int, c3 decimal, c4 float, c5 bit,
  c6 date, c7 varchar(10), c8 text, c9 json, c10 GEOMETRY,
  c11 array(int), c12 vector(3), c13 map(int, int), c14 sparsevector);
create index idx_c2 on test_sparse_vec_tbl(c2);
create vector index idx_c12 on test_sparse_vec_tbl(c12) with (distance=l2, lib=vsag, type=hnsw, m=10, ef_construction=100, ef_search=40);
--source sparse_vec_dml.inc
alter system set ob_vector_memory_limit_percentage =0;
